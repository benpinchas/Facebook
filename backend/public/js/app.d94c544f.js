(function(t){function e(e){for(var s,a,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)a=o[p],r[a]&&d.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},r={app:0},i=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01e9":function(t,e,n){"use strict";var s=n("bee0"),r=n.n(s);r.a},"0302":function(t,e,n){"use strict";var s=n("55e9"),r=n.n(s);r.a},"034f":function(t,e,n){"use strict";var s=n("64a9"),r=n.n(s);r.a},"0676":function(t,e,n){"use strict";var s=n("e9c6"),r=n.n(s);r.a},"0b0e":function(t,e,n){"use strict";var s=n("133e"),r=n.n(s);r.a},"0b56":function(t,e,n){"use strict";var s=n("75fc"),r=n.n(s);r.a},1:function(t,e){},"11c4":function(t,e,n){"use strict";var s=n("d6e0"),r=n.n(s);r.a},1289:function(t,e,n){},"133e":function(t,e,n){},"13ed":function(t,e,n){},"18e6":function(t,e,n){"use strict";var s=n("2769"),r=n.n(s);r.a},"1b28":function(t,e,n){"use strict";var s=n("3073"),r=n.n(s);r.a},"1e7f":function(t,e,n){"use strict";var s=n("9f2e"),r=n.n(s);r.a},"1fb2":function(t,e,n){},"23ba":function(t,e,n){},2616:function(t,e,n){},"26a2":function(t,e,n){"use strict";var s=n("b88a"),r=n.n(s);r.a},2769:function(t,e,n){},"305c":function(t,e,n){},3073:function(t,e,n){},"3ba9":function(t,e,n){"use strict";var s=n("23ba"),r=n.n(s);r.a},4433:function(t,e,n){},"464f":function(t,e,n){"use strict";var s=n("305c"),r=n.n(s);r.a},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=i(t);return n(e)}function i(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(s)},r.resolve=i,t.exports=r,r.id="4678"},"55e6":function(t,e,n){"use strict";var s=n("fa01"),r=n.n(s);r.a},"55e9":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("app-header"),n("router-view",{staticClass:"router"}),n("app-chat"),n("mobile-bar")],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[t.loggedInUser?n("main",[n("div",{staticClass:"wrapper"},[n("i",{staticClass:"fab fa-facebook-square logo",on:{click:function(e){return t.$router.push("/")}}}),n("app-search")],1),n("div",{staticClass:"wrapper hide-mobile"},[n("div",{staticClass:"link-container",on:{click:function(e){return t.$router.push("/user/"+t.loggedInUser._id)}}},[n("img",{attrs:{src:t.loggedInUser.url.profileImg}}),t._v("\n        "+t._s(t.loggedInUser.username)+"\n      ")]),n("div",{staticClass:"sep"}),n("span",{staticClass:"link-container",on:{click:function(e){return t.$router.push("/")}}},[t._v("Home")]),n("div",{staticClass:"sep"}),n("app-updates"),n("div",{staticClass:"sep"})],1),n("app-register")],1):n("main",[n("img",{staticClass:"literal-logo",attrs:{src:"https://www.facebook.com/rsrc.php/v3/y4/r/gf6iHxsw8zm.png",alt:""}}),n("app-register")],1)])},o=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[t.user?n("i",{staticClass:"fas fa-sign-out-alt header-icon",attrs:{title:"logout"},on:{click:t.logout}}):n("div",{staticClass:"app-register"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"text",placeholder:"Password"},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",{on:{click:t.login}},[t._v("Log In")]),n("button",{on:{click:t.signup}},[t._v("Sign Up")])])])},u=[],l={data:function(){return{credentials:{email:"",password:""}}},computed:{user:function(){return this.$store.getters.loggedInUser}},methods:{login:function(){this.$store.dispatch({type:"login",credentials:this.credentials}),this.credentials={email:"",password:""}},signup:function(){this.credentials.username=prompt("username is?"),this.credentials.url={},this.credentials.url.profileImg="https://api.adorable.io/avatars/212/".concat(this.credentials.username,".png"),this.$store.dispatch({type:"signup",credentials:this.credentials})},logout:function(){this.$store.dispatch({type:"logout"})}}},p=l,d=(n("d65f"),n("2877")),f=Object(d["a"])(p,c,u,!1,null,"23c3fbe7",null),m=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-updates"},[n("friend-request"),n("app-msg"),n("app-notification")],1)},g=[],v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("i",{staticClass:"fab fa-facebook-messenger header-icon"})])}],_={},w=_,y=Object(d["a"])(w,v,b,!1,null,"457f6d18",null),j=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.toggleWindow}},[n("i",{staticClass:"fas fa-bell header-icon",class:t.classObj}),n("unseen-count",{attrs:{unseen:t.unseen}}),t.isWindow?n("updates-window",[n("span",{attrs:{slot:"top"},slot:"top"},[t._v("Notificatios")]),n("span",{attrs:{slot:"content"},slot:"content"},t._l(t.notifications,function(t){return n("notification-preview",{key:t._id,attrs:{notification:t}})}),1)]):t._e()],1)},k=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.unseen.length?n("span",[t._v(t._s(t.unseen.length))]):t._e()},I=[],$={props:["unseen"]},O=$,U=(n("1b28"),Object(d["a"])(O,x,I,!1,null,"879fcd4a",null)),R=U.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"updates-window floating-box"},[n("div",{staticClass:"top"},[t._t("top")],2),n("div",{staticClass:"content-container"},[t._t("content",[t._v("Lorem ipsum dolor sit amet consectetur, adipisicing elit. Laborum corrupti neque recusandae beatae optio, libero saepe nam voluptatem! Saepe laboriosam optio nihil consequuntur distinctio quo quia, eius tempore fuga porro.")])],2)])},S=[],E={},L=E,B=(n("0b56"),Object(d["a"])(L,P,S,!1,null,"5388d5be",null)),F=B.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notification-preview",class:t.classObj,on:{click:t.readPost}},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.notification.imgUrl,alt:""}})]),n("div",{domProps:{innerHTML:t._s(t.notification.txt)}})])},T=[],q={props:["notification"],computed:{classObj:function(){return{unseen:!this.notification.isSeen}}},methods:{readPost:function(){this.$router.push("/post/".concat(this.notification.postId))}},mounted:function(){var t=this;this.notification.isSeen||setTimeout(function(){t.notification.isSeen=!0,t.$store.dispatch({type:"updateNotification",notification:t.notification})},1e3)}},D=q,N=(n("cedb"),Object(d["a"])(D,A,T,!1,null,"5451aa42",null)),M=N.exports,z=n("5118"),W={components:{UnseenCount:R,UpdatesWindow:F,NotificationPreview:M},data:function(){return{isWindow:!1}},computed:{notifications:function(){return this.$store.getters.notifications},unseen:function(){return this.$store.getters.unSeenNotifications},classObj:function(){return{unseen:this.unseen.length}}},methods:{toggleWindow:function(){this.isWindow=!this.isWindow}},created:function(){this.$store.dispatch({type:"loadNotifications"})}},G=W,H=(n("26a2"),Object(d["a"])(G,C,k,!1,null,"26c035d2",null)),J=H.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"friendship-request",on:{click:t.toggleWindow}},[n("i",{staticClass:"fas fa-user-friends header-icon",class:t.classObj}),n("unseen-count",{attrs:{unseen:t.unseen}}),t.isWindow?n("updates-window",[n("span",{attrs:{slot:"top"},slot:"top"},[t._v("Friend Requests")]),n("span",{attrs:{slot:"content"},slot:"content"},t._l(t.requestingUsers,function(t){return n("request-preview",{key:t._id,attrs:{user:t}})}),1)]):t._e()],1)},Y=[],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request-preview"},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}}),n("a",{staticClass:"username"},[t._v(t._s(t.user.username))])]),n("div",[n("button",{staticClass:"confirm",on:{click:t.confirmFriendship}},[t._v("Confirm")]),n("button",{staticClass:"delete"},[t._v("Delete")])])])},Z=[],Q={props:["user"],methods:{confirmFriendship:function(){this.user.friendship.isApproved=!0,this.$store.dispatch({type:"saveFriendship",friendship:this.user.friendship})}}},X=Q,tt=(n("87aa"),Object(d["a"])(X,V,Z,!1,null,"c29f6aae",null)),et=tt.exports,nt={components:{UpdatesWindow:F,unseenCount:R,RequestPreview:et},data:function(){return{isWindow:!1}},computed:{unseen:function(){return this.$store.getters.requestingUsers.filter(function(t){return!t.isSeen})},requestingUsers:function(){return console.log("requestingUsers",this.$store.getters.requestingUsers),this.$store.getters.requestingUsers},classObj:function(){return{unseen:this.unseen.length}}},methods:{toggleWindow:function(){this.isWindow=!this.isWindow}},created:function(){}},st=nt,rt=(n("d5a1"),Object(d["a"])(st,K,Y,!1,null,"43fd9345",null)),it=rt.exports,at={components:{AppMsg:j,AppNotification:J,FriendRequest:it}},ot=at,ct=(n("8674"),Object(d["a"])(ot,h,g,!1,null,"2ae8b072",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-container"},[n("div",{staticStyle:{position:"relative"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.txt,expression:"filterBy.txt"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.filterBy.txt},on:{input:[function(e){e.target.composing||t.$set(t.filterBy,"txt",e.target.value)},t.onInput]}}),t.isLoading?n("my-loader",{staticClass:"loader"}):t._e()],1),n("div",{staticClass:"result-list",on:{click:t.clearInput}},t._l(t.users,function(e){return t.filterBy.txt?n("user-preview",{attrs:{user:e}}):t._e()}),1)])},pt=[],dt=(n("96cf"),n("3b8d")),ft=n("8c4f"),mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("section",{staticClass:"user-profile"},[n("user-details",{staticClass:"user-details",attrs:{user:t.user}}),n("section",{staticClass:"flex"},[n("app-post",{staticClass:"app-post"}),n("aside",[n("user-friends",{attrs:{friends:t.user.friends}}),n("friend-suggest",{staticClass:"friend-suggest"})],1)],1)],1):t._e()},ht=[],gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"app-post"},[n("add-post"),n("post-list")],1)},vt=[],bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.user&&t.post?s("div",{staticClass:"add-post floating-box",class:t.classObj},[s("header",[t._v("Create Post")]),"gradient"!==t.post.type?s("main",[s("div",{staticClass:"profile-image-container-thumb"},[s("img",{attrs:{src:t.user.url.profileImg,alt:""}})]),s("section",{staticStyle:{"flex-grow":"1"}},[s("div",{ref:"contenteditable",staticClass:"input-container",attrs:{contenteditable:"",placeholder:t.placeholder},on:{input:t.onInput}})]),s("div",{staticClass:"realtive-wrapper"},[s("content-preview",{attrs:{type:t.post.type,content:t.post.content,post:t.post}}),t.isLoadingContentPreview?s("my-loader"):t._e()],1)]):s("div",{ref:"contenteditable",staticClass:"gradient",class:t.post.gradientClass,attrs:{placeholder:t.placeholder,contenteditable:""},on:{input:t.onInput}}),s("footer",[s("div",{staticClass:"main"},[s("upload-image",{ref:"imageInput",staticStyle:{display:"none"},on:{setImageUrl:t.setImageUrl}}),s("div",{staticClass:"post-type-container"},[s("div",{staticClass:"post-type",on:{click:t.clickImageInput}},[s("img",{attrs:{src:n("e429"),alt:""}}),t._v("\n            Photo\n          ")])]),s("div",{staticClass:"gradient-container"},[s("div",{staticClass:"regular",on:{click:t.clearType}}),s("div",{staticClass:"purple",on:{click:function(e){return t.setGradient("purple")}}}),s("div",{staticClass:"party-small",on:{click:function(e){return t.setGradient("party")}}}),s("div",{staticClass:"poop-small",on:{click:function(e){return t.setGradient("poop")}}}),s("div",{staticClass:"fire-small",on:{click:function(e){return t.setGradient("fire")}}}),s("div",{staticClass:"smiley-small",on:{click:function(e){return t.setGradient("smiley")}}})]),s("button",{on:{click:t.addPost}},[s("i",{staticClass:"fas fa-globe-americas"}),t._v(" Publish\n        ")])],1)])]):t._e()])},_t=[],wt=(n("4be7"),{save:Ct,query:Ut,toggleLike:xt,saveComment:$t,getById:yt});function yt(t){return jt.apply(this,arguments)}function jt(){return jt=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/post/".concat(e)));case 1:case"end":return t.stop()}},t)})),jt.apply(this,arguments)}function Ct(t){return kt.apply(this,arguments)}function kt(){return kt=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ss.post("api/post",e);case 2:return n=t.sent,console.log("service:",n),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})),kt.apply(this,arguments)}function xt(t){return It.apply(this,arguments)}function It(){return It=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.userId,s=e.postId,t.next=3,Ss.post("api/post/like",{userId:n,postId:s});case 3:console.log("like toggled");case 4:case"end":return t.stop()}},t)})),It.apply(this,arguments)}function $t(t){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ss.post("api/post/comment",e);case 2:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),Ot.apply(this,arguments)}function Ut(t){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ss.get("api/post",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)})),Rt.apply(this,arguments)}var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.type?n("section",{staticClass:"content-preview"},[n(t.component,{tag:"component",attrs:{content:t.content,post:t.post}})],1):t._e()},St=[],Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-container"},[n("img",{attrs:{src:t.content}})])},Lt=[],Bt={props:["content"]},Ft=Bt,At=(n("1e7f"),Object(d["a"])(Ft,Et,Lt,!1,null,"597c009c",null)),Tt=At.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{ref:"contenteditable",staticClass:"gradient gradient-preview",class:t.post.gradientClass},[t._v(t._s(t.post.txt))])])},Dt=[],Nt={props:["post"],methods:{setContent:function(){this.$parent.$emit("setGradientTxt",this.$refs.contenteditable.innerText)}}},Mt=Nt,zt=Object(d["a"])(Mt,qt,Dt,!1,null,"3a0eff6a",null),Wt=zt.exports,Gt={props:["type","content","post"],components:{ImagePreview:Tt,GradientPreview:Wt},computed:{component:function(){return this.type+"-preview"}}},Ht=Gt,Jt=(n("18e6"),Object(d["a"])(Ht,Pt,St,!1,null,"22fa1312",null)),Kt=Jt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"file",name:"",id:""},on:{change:t.imageChanged}})},Vt=[],Zt={uploadImage:Qt};function Qt(t){var e="benpinchas1",n="https://api.cloudinary.com/v1_1/".concat(e,"/image/upload"),s=new FormData;return s.append("file",t.target.files[0]),s.append("upload_preset","hj7a9uwm"),fetch(n,{method:"POST",body:s}).then(function(t){return t.json()}).then(function(t){return t.secure_url}).catch(function(t){throw console.error(t),t})}var Xt={methods:{imageChanged:function(t){console.log(t);var e=Zt.uploadImage(t);this.$emit("setImageUrl",e)}}},te=Xt,ee=Object(d["a"])(te,Yt,Vt,!1,null,"870240a8",null),ne=ee.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticClass:"loader",attrs:{src:"https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/3Wf1AkaVBVk.gif",alt:""}})},re=[],ie={},ae=ie,oe=(n("01e9"),Object(d["a"])(ae,se,re,!1,null,"79e89c6c",null)),ce=oe.exports,ue={components:{ContentPreview:Kt,UploadImage:ne,MyLoader:ce},data:function(){return{isLoadingPublishPost:!1,isLoadingContentPreview:!1,post:null}},computed:{user:function(){return this.$store.getters.loggedInUser||{}},placeholder:function(){return this.$store.getters.loggedInUser?"What's on your mind, "+this.$store.getters.loggedInUser.username+"?":null},classObj:function(){return{loading:this.isLoadingPublishPost}}},methods:{addPost:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadingPublishPost=!0,t.next=3,this.$store.dispatch({type:"addPost",post:this.post});case 3:this.clearPost(),this.isLoadingPublishPost=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clearPost:function(){this.$refs.contenteditable&&(this.$refs.contenteditable.innerText=""),this.post={at:Date.now(),userId:this.$store.getters.loggedInUser._id,user2Id:this.$route.params.userId||this.$store.getters.loggedInUser._id,txt:"",type:"",content:"",gradientClass:"a",comments:[],likedBy:[]},console.log(this.post)},onInput:function(){this.post.txt=this.$refs.contenteditable.innerText},setGradient:function(t){this.post.type="gradient",this.post.gradientClass=t},clearType:function(){this.post.type=""},clickImageInput:function(){this.$refs.imageInput.$el.click()},setImageUrl:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadingContentPreview=!0,t.prev=1,this.post.type="image",t.next=5,e;case 5:this.post.content=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:return t.prev=11,this.isLoadingContentPreview=!1,t.finish(11);case 14:console.log(this.post.content);case 15:case"end":return t.stop()}},t,this,[[1,8,11,14]])}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){this.clearPost()},watch:{"$route.params.userId":function(){console.log(this.$route.params.userId),this.clearPost()}}},le=ue,pe=(n("f474"),Object(d["a"])(le,bt,_t,!1,null,"5ef76608",null)),de=pe.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-list"},t._l(t.posts,function(e){return n("post-preview",{key:e._id,attrs:{post:e}},[t._v(t._s(e._id))])}),1)},me=[],he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("div",{staticClass:"post-preview floating-box"},[n("main",[n("header",[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}})]),n("div",{staticClass:"info-container",staticStyle:{"padding-top":"3px"}},[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toUserProfile(e)}}},[t._v(t._s(t._f("fUsername")(t.user.username)))]),t.post.userId!==t.post.user2Id?n("span",[t._v("\n             ▸ \n            "),n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/user/"+t.post.user2Id)}}},[t._v(t._s(t._f("fUsername")(t.post.user2.username)))])]):t._e()]),n("div",{staticClass:"time-container system-color"},[n("span",{staticClass:"time",on:{click:function(e){return t.$router.push("/post/"+t.post._id)}}},[t._v(t._s(t._f("timeAgo")(t.post.at)))]),t._v("\n          ·\n          "),n("i",{staticClass:"fas fa-globe-americas"})])])]),"gradient"!==t.post.type?n("div",{staticStyle:{"font-size":"15px","margin-bottom":"12px"},domProps:{innerHTML:t._s(t.post.txt)}}):t._e()]),n("content-preview",{attrs:{type:t.post.type,content:t.post.content,post:t.post}}),n("footer",[n("div",{staticClass:"stats-container system-color"},[n("p",{staticClass:"like-count"},[t.post.likedBy.length?n("span",[t._v(t._s(t.post.likedBy.length)+" Likes")]):t._e()]),n("p",{staticClass:"comment-count",on:{click:t.toggleComments}},[t.post.comments.length?n("span",[t._v(t._s(t.post.comments.length)+" Comments")]):t._e()])]),n("interactions-btns",{attrs:{isLiked:t.isLiked},on:{toggleLike:t.toggleLike,toggleComments:t.toggleComments}})],1),t.showComments?n("post-comments",{attrs:{comments:t.post.comments},on:{addComment:t.addComment}}):t._e()],1):t._e()},ge=[],ve=(n("7514"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"interactions-btns"},[n("button",{class:t.likeBtnClass,on:{click:t.toggleLike}},[n("i",{staticClass:"far fa-thumbs-up"}),t._v(" Like\n  ")]),n("button",{on:{click:t.toggleComments}},[n("i",{staticClass:"far fa-comment"}),t._v(" Comment\n  ")]),t._m(0)])}),be=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",[n("i",{staticClass:"fas fa-share"}),t._v(" Share\n  ")])}],_e={props:["isLiked"],computed:{likeBtnClass:function(){return{liked:this.isLiked}}},methods:{toggleLike:function(){this.$emit("toggleLike")},toggleComments:function(){this.$emit("toggleComments")}}},we=_e,ye=(n("b440"),Object(d["a"])(we,ve,be,!1,null,"fbd28626",null)),je=ye.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-comment"},[n("add-comment",{on:{addComment:t.addComment}}),n("comment-list",{attrs:{comments:t.comments}})],1)},ke=[],xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedInUser?n("div",{staticClass:"add-comment"},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.loggedInUser.url.profileImg,alt:""}})]),n("div",{staticClass:"realtive"}),n("div",{ref:"contenteditable",staticClass:"comment-container dark-set-1 ",attrs:{placeholder:"Write a comment...",contenteditable:""}}),n("button",{on:{click:t.addComment}},[n("i",{staticClass:"far fa-paper-plane"})])]):t._e()},Ie=[],$e={computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},mounted:function(){this.$refs.contenteditable.focus()},methods:{addComment:function(){this.$emit("addComment",this.$refs.contenteditable.innerText),this.$refs.contenteditable.innerText=""}}},Oe=$e,Ue=(n("464f"),Object(d["a"])(Oe,xe,Ie,!1,null,"791d72e5",null)),Re=Ue.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},t._l(t.comments,function(t){return n("comment-preview",{attrs:{comment:t}})}),1)},Se=[],Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-preview"},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.comment.owner.profileImg,alt:""}})]),n("div",[n("div",{staticClass:"comment-container dark-set-1"},[n("div",{staticClass:"name-container",staticStyle:{"margin-bottom":"3px"}},[n("a",{staticClass:"username-color",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.readUser(e)}}},[t._v(t._s(t._f("fUsername")(t.comment.owner.username)))])]),n("div",{staticStyle:{padding:"2px"}},[t._v(t._s(t.comment.txt))]),t.likesCount?n("like-count",{attrs:{likesCount:t.likesCount}}):t._e()],1),n("div",{staticClass:"actions-container"},[n("a",{class:t.likeClassObj,on:{click:t.toggleLike}},[t._v("Like")]),t._v("  ·  "+t._s(t._f("timeAgo")(t.comment.at))+"\n    ")])])])},Le=[],Be=(n("8e6e"),n("ac6a"),n("456d"),n("20d6"),n("bd86")),Fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"like-count"},[t._m(0),n("span",{staticClass:"count"},[t._v(t._s(t.likesCount))])])},Ae=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img-container"},[s("img",{attrs:{src:n("8e44"),alt:""}})])}],Te={props:["likesCount"]},qe=Te,De=(n("0302"),Object(d["a"])(qe,Fe,Ae,!1,null,"0d148901",null)),Ne=De.exports;function Me(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Me(n,!0).forEach(function(e){Object(Be["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Me(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var We={props:["comment"],components:{LikeCount:Ne},computed:{likesCount:function(){return this.comment.likedBy.length},likeClassObj:function(){var t=this;return{liked:this.comment.likedBy.find(function(e){return e.userId===t.$store.getters.loggedInUser._id})}}},methods:{readUser:function(){this.$router.push("/user/".concat(this.comment.owner.userId))},toggleLike:function(){var t=this,e=ze({},this.comment),n=e.likedBy.findIndex(function(e){return e.userId===t.$store.getters.loggedInUser._id});n>=0?e.likedBy.splice(n,1):e.likedBy.push({userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username}),this.$store.dispatch({type:"saveComment",comment:e})}}},Ge=We,He=(n("11c4"),Object(d["a"])(Ge,Ee,Le,!1,null,"7d538af6",null)),Je=He.exports,Ke={props:["comments"],components:{CommentPreview:Je}},Ye=Ke,Ve=(n("6b41"),Object(d["a"])(Ye,Pe,Se,!1,null,"703da9d7",null)),Ze=Ve.exports,Qe={props:["comments"],components:{AddComment:Re,CommentList:Ze},methods:{addComment:function(t){this.$emit("addComment",t)}}},Xe=Qe,tn=(n("8dc8"),Object(d["a"])(Xe,Ce,ke,!1,null,"1d7fb313",null)),en=tn.exports,nn={props:["post"],components:{InteractionsBtns:je,PostComments:en,ContentPreview:Kt},data:function(){return{showComments:!1}},computed:{user:function(){return this.post.user},isLiked:function(){var t=this;return!!this.$store.getters.loggedInUser&&this.post.likedBy.find(function(e){return e.userId===t.$store.getters.loggedInUser._id})}},methods:{toggleComments:function(){this.showComments=!this.showComments},toggleLike:function(){this.$store.dispatch({type:"toggleLike",userId:this.$store.getters.loggedInUser._id,postId:this.post._id})},addComment:function(t){var e={at:Date.now(),_id:Math.random()+"",postId:this.post._id,txt:t,owner:{userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username,profileImg:this.$store.getters.loggedInUser.url.profileImg},likedBy:[]};this.$store.dispatch({type:"saveComment",comment:e})},toUserProfile:function(){this.$router.push("/user/".concat(this.post.user._id))}}},sn=nn,rn=(n("0676"),Object(d["a"])(sn,he,ge,!1,null,"4ee7ddc8",null)),an=rn.exports,on={components:{PostPreview:an},computed:{posts:function(){return this.$store.getters.posts}},methods:{loadPosts:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.userId,t.next=3,this.$store.dispatch({type:"loadPosts",filterBy:{userId:e}});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadPosts()},watch:{"$route.params.userId":function(){this.loadPosts()}}},cn=on,un=(n("a2ae"),Object(d["a"])(cn,fe,me,!1,null,"e7f7a0e0",null)),ln=un.exports,pn={components:{AddPost:de,PostList:ln}},dn=pn,fn=Object(d["a"])(dn,gt,vt,!1,null,"4d946fad",null),mn=fn.exports,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("side-box",[n("span",{attrs:{slot:"headline"},slot:"headline"},[t._v("People You May Know")]),n("span",{attrs:{slot:"main"},slot:"main"},t._l(t.suggests,function(t){return n("suggest-preview",{attrs:{user:t}})}),1)])],1)},gn=[],vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root-el floating-box"},[n("header",[n("span",{staticClass:"system-txt"},[t._t("headline",[t._v("Default headline")])],2)]),n("main",[t._t("main",[t._v("Default main")])],2)])},bn=[],_n={},wn=_n,yn=(n("bfc3"),Object(d["a"])(wn,vn,bn,!1,null,null,null)),jn=yn.exports,Cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",{staticClass:"g-user-snippet-container-small"},[n("div",{staticClass:"g-profile-image-container-thumb-small"},[n("img",{attrs:{src:t.user.url?t.user.url.profileImg:null}})]),n("div",{staticClass:"secondary-container"},[n("div",{staticStyle:{"margin-bottom":"3px"},on:{click:function(e){return e.preventDefault(),t.readUser(e)}}},[n("a",{attrs:{href:""}},[t._v(t._s(t.user.username))])]),n("div",{staticClass:"btns-container"},[n("friendship-btn",{staticClass:"friendship-btn",attrs:{user:t.user}})],1)])])])},kn=[],xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["add"===t.type?n("button",{on:{click:t.addFriendship}},[n("i",{staticClass:"fas fa-user-plus"}),t._v(" Add Friend\n  ")]):t._e(),"approved"===t.type?n("button",{attrs:{disabled:""}},[n("i",{staticClass:"fas fa-check"}),t._v(" Friends\n  ")]):t._e(),"confirm"===t.type?n("button",{on:{click:t.approveFriendship}},[n("i",{staticClass:"fas fa-user-plus"}),t._v(" Confirm\n  ")]):t._e(),"sent"===t.type?n("button",{attrs:{disabled:""}},[n("i",{staticClass:"fas fa-share"}),t._v(" Friend Request Sent\n  ")]):t._e()])},In=[],$n={props:["user"],data:function(){return{}},computed:{type:function(){return this.$store.getters.loggedInUser&&this.user._id!==this.$store.getters.loggedInUser._id?this.user.friendship?this.user.friendship.isApproved?"approved":this.user.friendship.user1Id===this.user._id?"confirm":"sent":"add":null}},methods:{addFriendship:function(){var t={user1Id:this.$store.getters.loggedInUser._id,user2Id:this.user._id,at:Date.now(),isApproved:!1,isSeen:!1,msg:[{txt:"hello"},{txt:"shalom"}]};this.user.friendship=t,this.$store.dispatch({type:"saveFriendship",friendship:t}),console.log("OK")},approveFriendship:function(){this.user.friendship.isApproved=!0,this.$store.dispatch({type:"saveFriendship",friendship:this.user.friendship})}},mounted:function(){console.log("USER:",this.user)}},On=$n,Un=(n("dc14"),Object(d["a"])(On,xn,In,!1,null,"4a2da10a",null)),Rn=Un.exports,Pn={props:["user"],components:{FriendshipBtn:Rn},data:function(){return{}},methods:{readUser:function(){this.$router.push("/user/".concat(this.user._id))}}},Sn=Pn,En=(n("55e6"),Object(d["a"])(Sn,Cn,kn,!1,null,"0117629d",null)),Ln=En.exports,Bn={components:{SideBox:jn,SuggestPreview:Ln},computed:{suggests:function(){return console.log(" this.$store.getters.suggests",this.$store.getters.suggests),this.$store.getters.suggests}},created:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch({type:"loadSuggests"}),this.$store.dispatch({type:"loadFriendshipUsers"});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},Fn=Bn,An=(n("96f0"),Object(d["a"])(Fn,hn,gn,!1,null,null,null)),Tn=An.exports,qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("section",{staticClass:"user-profile"},[t.user?n("div",{staticClass:"main dark-set-2"},[n("div",{staticClass:"cover-img-container",style:{"background-image":"url("+t.user.url.coverImg+")"}},[t.isLoadCoverImg?n("my-loader"):t._e(),t.canEdit?n("upload-image",{staticClass:"custom-file-input cover-img-input",on:{setImageUrl:t.setCoverImage}}):t._e()],1),n("div",{staticClass:"profile-img-container"},[n("div",{staticStyle:{position:"relative"}},[n("img",{staticClass:"profile-img",attrs:{src:t.user.url.profileImg,alt:""}}),t.canEdit?n("upload-image",{staticClass:"custom-file-input profile-img-input",on:{setImageUrl:t.setProfileImage}}):t._e(),t.isLoadProfileImg?n("my-loader"):t._e()],1),n("h1",{staticClass:"username"},[t._v(t._s(t._f("fUsername")(t.user.username)))])]),n("div",{staticClass:"btns-container"},[n("friendship-button",{attrs:{user:t.user}}),t._m(0)],1)]):t._e()]):t._e()},Dn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",[n("i",{staticClass:"fab fa-facebook-messenger"}),t._v(" Message\n      ")])}],Nn={components:{UploadImage:ne,MyLoader:ce,FriendshipButton:Rn},props:["user"],data:function(){return{isLoadProfileImg:!1,isLoadCoverImg:!1}},computed:{isShow:function(){return this.$route.params.userId},friendshipStatus:function(){var t=this,e=this.$store.getters.friendships.find(function(e){return e.user1.userId===t.user._id||e.user2.userId===t.user._id});return e?e.isApproved?"approved":e.user2.userId===this.user._id?"Sent":"You need to confirm":"not friends"},canEdit:function(){return!!this.$store.getters.loggedInUser&&this.user._id===this.$store.getters.loggedInUser._id}},methods:{setProfileImage:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadProfileImg=!0,n=this.user.url.profileImg,t.prev=2,t.next=5,e;case 5:return s=t.sent,this.user.url.profileImg=s,t.next=9,this.$store.dispatch({type:"saveUser",user:this.user});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),this.user.url.profileImg=n;case 14:return t.prev=14,this.isLoadProfileImg=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,11,14,17]])}));function e(e){return t.apply(this,arguments)}return e}(),setCoverImage:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadCoverImg=!0,n=this.user.url.coverImg,t.prev=2,t.next=5,e;case 5:return s=t.sent,this.user.url.coverImg=s,t.next=9,this.$store.dispatch({type:"saveUser",user:this.user});case 9:console.log("user saved"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),this.user.url.coverImg=n;case 15:return t.prev=15,this.isLoadCoverImg=!1,t.finish(15);case 18:case"end":return t.stop()}},t,this,[[2,12,15,18]])}));function e(e){return t.apply(this,arguments)}return e}()}},Mn=Nn,zn=(n("c8b8"),Object(d["a"])(Mn,qn,Dn,!1,null,"48ff90fe",null)),Wn=zn.exports,Gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("side-box",[n("span",{attrs:{slot:"headline"},slot:"headline"},[t._v("Friends  · "+t._s(t.friends.length))]),n("div",{staticClass:"user-list",attrs:{slot:"main"},slot:"main"},t._l(t.friends,function(t){return n("user-preview",{attrs:{user:t}})}),1)])},Hn=[],Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-preview",style:{"background-image":"url("+t.user.url.profileImg+")"},on:{click:t.readUser}},[n("div",{staticClass:"overlay"},[n("span",{staticClass:"username"},[t._v(t._s(t._f("fUsername")(t.user.username)))])])])},Kn=[],Yn={props:["user"],methods:{readUser:function(){this.$router.push("/user/".concat(this.user._id))}}},Vn=Yn,Zn=(n("0b0e"),Object(d["a"])(Vn,Jn,Kn,!1,null,"021e0508",null)),Qn=Zn.exports,Xn={components:{SideBox:jn,UserPreview:Qn},props:["friends"]},ts=Xn,es=(n("e91b"),Object(d["a"])(ts,Gn,Hn,!1,null,"467dc50a",null)),ns=es.exports,ss={components:{AppPost:mn,FriendSuggest:Tn,UserDetails:Wn,UserFriends:ns},data:function(){return{user:null}},methods:{loadUser:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$route.params.userId){t.next=6;break}return t.next=3,Es.getById(this.$route.params.userId);case 3:e=t.sent,this.user=e,window.scrollTo(0,0);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadUser()},watch:{"$route.params.userId":function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.loadUser();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},rs=ss,is=(n("93ad"),Object(d["a"])(rs,mt,ht,!1,null,"ce7f1d0c",null)),as=is.exports,os=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"home-page"},[n("aside",{staticClass:"left"}),n("main",[n("router-view",{staticClass:"router"}),n("friend-suggest",{staticClass:"friend-suggest"})],1),n("aside")])},cs=[],us={components:{AppPost:mn,FriendSuggest:Tn}},ls=us,ps=(n("3ba9"),Object(d["a"])(ls,os,cs,!1,null,"1f86340e",null)),ds=ps.exports,fs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("app-post",{staticClass:"app-post"})],1)},ms=[],hs={components:{AppPost:mn}},gs=hs,vs=(n("755c"),Object(d["a"])(gs,fs,ms,!1,null,"791b3305",null)),bs=vs.exports,_s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.post?n("div",{staticClass:"post-preview floating-box"},[n("main",[n("header",[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}})]),n("div",{staticClass:"info-container",staticStyle:{"padding-top":"3px"}},[n("div",{staticStyle:{"margin-bottom":"5px"}},[n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toUserProfile(e)}}},[t._v(t._s(t.user.username))]),t.post.userId!==t.post.user2Id?n("span",[t._v("\n             ▸ \n            "),n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/user/"+t.post.user2Id)}}},[t._v(t._s(t._f("fUsername")(t.post.user2.username)))])]):t._e()]),n("div",{staticClass:"time-container"},[n("span",{staticClass:"time",on:{click:function(e){return t.$router.push("/post/"+t.post._id)}}},[t._v("40 min ago")]),t._v("\n          ·\n          "),n("i",{staticClass:"fas fa-globe-americas"})])])]),"gradient"!==t.post.type?n("div",{staticStyle:{"font-size":"15px","margin-bottom":"12px"},domProps:{innerHTML:t._s(t.post.txt)}}):t._e()]),n("content-preview",{attrs:{type:t.post.type,content:t.post.content,post:t.post}}),n("footer",[n("div",{staticClass:"stats-container"},[n("p",{staticClass:"like-count"},[t.post.likedBy.length?n("span",[t._v(t._s(t.post.likedBy.length)+" Likes")]):t._e()]),n("p",{staticClass:"comment-count",on:{click:t.toggleComments}},[t.post.comments.length?n("span",[t._v(t._s(t.post.comments.length)+" Comments")]):t._e()])]),n("interactions-btns",{attrs:{isLiked:t.isLiked},on:{toggleLike:t.toggleLike,toggleComments:t.toggleComments}})],1),t.showComments?n("post-comments",{attrs:{comments:t.post.comments},on:{addComment:t.addComment}}):t._e()],1):t._e()},ws=[],ys={components:{InteractionsBtns:je,PostComments:en,ContentPreview:Kt},data:function(){return{showComments:!0,post:null}},computed:{user:function(){return this.post.user},isLiked:function(){var t=this;return!!this.$store.getters.loggedInUser&&this.post.likedBy.find(function(e){return e.userId===t.$store.getters.loggedInUser._id})}},methods:{toggleComments:function(){this.showComments=!this.showComments},toggleLike:function(){var t=this,e=this.post.likedBy.findIndex(function(e){return e.userId===t.$store.getters.loggedInUser._id});-1===e?this.post.likedBy.unshift({userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username}):this.post.likedBy.splice(e,1),this.$store.dispatch({type:"toggleLike",userId:this.$store.getters.loggedInUser._id,postId:this.post._id})},addComment:function(t){var e={at:Date.now(),_id:Math.random()+"",postId:this.post._id,txt:t,owner:{userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username,profileImg:this.$store.getters.loggedInUser.url.profileImg},likedBy:[]};this.post.comments.push(e),this.$store.dispatch({type:"saveComment",comment:e})},toUserProfile:function(){this.$router.push("/user/".concat(this.post.user._id))},loadPost:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.postId,t.next=3,wt.getById(e);case 3:n=t.sent,this.post=n;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadPost()},watch:{"$route.params.postId":function(){this.loadPost()}}},js=ys,Cs=(n("c9c8"),Object(d["a"])(js,_s,ws,!1,null,"46f71641",null)),ks=Cs.exports;s["a"].use(ft["a"]);var xs=new ft["a"]({routes:[{path:"/",name:"HomePage",component:ds,children:[{path:"",component:bs},{path:"post/:postId",component:ks}]},{path:"/user/:userId",name:"UserProfile",component:as},{path:"/post/:postId",name:"NewsFeed",component:bs}]}),Is=n("bc3a"),$s=n.n(Is),Os="/",Us=$s.a.create({withCredentials:!0});function Rs(t){return Ps.apply(this,arguments)}function Ps(){return Ps=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s,r,i,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",s=a.length>2&&void 0!==a[2]?a[2]:null,r=a.length>3&&void 0!==a[3]?a[3]:null,t.prev=3,t.next=6,Us({url:"".concat(Os).concat(e),method:n,data:s,params:r});case 6:return i=t.sent,t.abrupt("return",i.data);case 10:throw t.prev=10,t.t0=t["catch"](3),401===t.t0.response.status&&xs.push("/"),t.t0;case 14:case"end":return t.stop()}},t,null,[[3,10]])})),Ps.apply(this,arguments)}var Ss={get:function(t,e){return Rs(t,"GET",null,e)},post:function(t,e){return Rs(t,"POST",e)},put:function(t,e){return Rs(t,"PUT",e)},delete:function(t,e){return Rs(t,"DELETE",e)}},Es={login:As,logout:Ns,signup:qs,getLoggedInUser:Fs,getUsers:Ws,getById:Hs,update:Ks,query:Ms},Ls="loggedInUser11",Bs="undefined"===sessionStorage.getItem(Ls)?null:JSON.parse(sessionStorage.getItem(Ls));function Fs(){return Bs}function As(t){return Ts.apply(this,arguments)}function Ts(){return Ts=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ss.post("api/auth/login",e);case 3:return n=t.sent,Bs=n,sessionStorage.setItem(Ls,JSON.stringify(Bs)),t.abrupt("return",Bs);case 9:t.prev=9,t.t0=t["catch"](0),console.log("err");case 12:case"end":return t.stop()}},t,null,[[0,9]])})),Ts.apply(this,arguments)}function qs(t){return Ds.apply(this,arguments)}function Ds(){return Ds=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.post("api/auth/signup",e));case 1:case"end":return t.stop()}},t)})),Ds.apply(this,arguments)}function Ns(){Ss.post("api/auth/logout").then(function(t){console.log(t),Bs=null,sessionStorage.setItem(Ls,null)})}function Ms(t){return zs.apply(this,arguments)}function zs(){return zs=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/user",e));case 1:case"end":return t.stop()}},t)})),zs.apply(this,arguments)}function Ws(){return Gs.apply(this,arguments)}function Gs(){return Gs=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/user"));case 1:case"end":return t.stop()}},t)})),Gs.apply(this,arguments)}function Hs(t){return Js.apply(this,arguments)}function Js(){return Js=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/user/".concat(e)));case 1:case"end":return t.stop()}},t)})),Js.apply(this,arguments)}function Ks(t){return Ys.apply(this,arguments)}function Ys(){return Ys=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ss.put("api/user/",e);case 2:return n=t.sent,Bs=n,sessionStorage.setItem(Ls,JSON.stringify(Bs)),t.abrupt("return",Bs);case 6:case"end":return t.stop()}},t)})),Ys.apply(this,arguments)}var Vs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-preview",on:{click:function(e){return t.$router.push("/user/"+t.user._id)}}},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}}),n("a",{staticClass:"username"},[t._v(t._s(t.user.username))])]),n("div")])},Zs=[],Qs={props:["user"],methods:{}},Xs=Qs,tr=(n("d188"),Object(d["a"])(Xs,Vs,Zs,!1,null,"1cc1d60a",null)),er=tr.exports,nr={components:{UserPreview:er,MyLoader:ce},data:function(){return{filterBy:{txt:"",limit:5},users:[],isLoading:!1}},methods:{onInput:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,Es.query(this.filterBy);case 3:e=t.sent,this.users=e,Object(z["setTimeout"])(function(){n.isLoading=!1},700);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clearInput:function(){this.filterBy.txt=""}}},sr=nr,rr=(n("6157"),Object(d["a"])(sr,lt,pt,!1,null,"790daf02",null)),ir=rr.exports,ar={components:{AppRegister:m,AppUpdates:ut,AppSearch:ir},computed:{loggedInUser:function(){return console.log(this.$store.getters.loggedInUser),this.$store.getters.loggedInUser}}},or=ar,cr=(n("ac42"),Object(d["a"])(or,a,o,!1,null,"26cdf70c",null)),ur=cr.exports,lr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-chat"},[n("contact-cmp",{staticClass:"contact-cmp"}),t._l(t.chats,function(t,e){return n("chat-window",{key:t._id,attrs:{chat:t,idx:e}})})],2)},pr=[],dr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-cmp"},[n("div",{staticClass:"top",on:{click:t.toggleList}},[n("span",[t._v("Chat ("+t._s(t.users.length)+")")]),n("i",{staticClass:"far fa-edit",staticStyle:{"font-size":"16px"}})]),t.isShowList?n("contact-list",{attrs:{users:t.users}}):t._e()],1)},fr=[],mr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"friendship-list"},t._l(t.users,function(t){return n("contact-preview",{key:t._id,attrs:{user:t}})}),1)},hr=[],gr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-preview",on:{click:t.loadChatWith}},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}}),t._v("\n    "+t._s(t.user.username)+"\n  ")]),n("div",[n("span",{staticClass:"dot",class:t.classObj})])])},vr=[],br=(n("3e8f"),{props:["user"],computed:{isActive:function(){console.log(this.$store.getters)},classObj:function(){var t=this;return{active:this.$store.getters.activeUsers.find(function(e){return e===t.user._id})}}},methods:{loadChatWith:function(){this.$store.dispatch({type:"loadChatWith",userId:this.user._id})}}}),_r=br,wr=(n("83c5"),Object(d["a"])(_r,gr,vr,!1,null,"d646deb4",null)),yr=wr.exports,jr={props:["users"],components:{ContactPreview:yr}},Cr=jr,kr=(n("720b"),Object(d["a"])(Cr,mr,hr,!1,null,"0b84a669",null)),xr=kr.exports,Ir={components:{ContactList:xr},data:function(){return{isShowList:!1}},computed:{users:function(){return this.$store.getters.approvedUsers}},methods:{toggleList:function(){this.isShowList=!this.isShowList}}},$r=Ir,Or=(n("aa21"),Object(d["a"])($r,dr,fr,!1,null,"318ffb80",null)),Ur=Or.exports,Rr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.chats,function(t,e){return n("chat-window",{key:t._id,attrs:{chat:t,idx:e}})}),1)},Pr=[],Sr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-window"},[n("audio",{attrs:{id:"play",src:"https://vocaroo.com/media_command.php?media=s0vMxmjrTZYM&command=download_mp3"}}),t._m(0),n("div",{ref:"msgList",staticClass:"msg-list"},t._l(t.msgs,function(t){return n("msg-preview",{key:t.at,attrs:{msg:t}})}),1),n("form",{staticClass:"send-msg-container",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.txt,expression:"txt"}],ref:"txtInput",attrs:{type:"text",placeholder:"Type a message...",autofocus:""},domProps:{value:t.txt},on:{input:function(e){e.target.composing||(t.txt=e.target.value)}}}),n("i",{staticClass:"fas fa-arrow-circle-up send-icon",class:t.classObj})])])},Er=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top"},[n("div",{staticClass:"main"},[t._v("\n      Tal Maoz  "),n("i",{staticClass:"fas fa-times system-color"})])])}],Lr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"msg-preview income",class:t.classObj},[t._v(t._s(t.msg.txt))])])},Br=[],Fr={props:["msg"],computed:{classObj:function(){return{outcome:this.msg.userId===this.$store.getters.loggedInUser._id}}}},Ar=Fr,Tr=(n("5c67"),Object(d["a"])(Ar,Lr,Br,!1,null,"2b6cc06d",null)),qr=Tr.exports,Dr={props:["chat"],data:function(){return{txt:""}},computed:{msgs:function(){return this.chat.msgs},classObj:function(){return{disable:!this.txt}}},methods:{sendMsg:function(){if(this.txt){var t=this.createMsg();this.$store.dispatch({type:"addMsg",msg:t,chatId:this.chat._id,toUserId:this.chat.user1Id===this.$store.getters.loggedInUser._id?this.chat.user2Id:this.chat.user1Id}),this.txt="",this.$refs.txtInput.focus()}},createMsg:function(){return{txt:this.txt,userId:this.$store.getters.loggedInUser._id,at:Date.now()}}},watch:{msgs:function(){var t=this;document.getElementById("play").play(),setTimeout(function(){t.$refs.msgList.scrollTop=t.$refs.msgList.scrollHeight},100)}},components:{MsgPreview:qr}},Nr=Dr,Mr=(n("a6d0"),Object(d["a"])(Nr,Sr,Er,!1,null,"0d7b0d12",null)),zr=Mr.exports,Wr={components:{ChatWindow:zr},computed:{chats:function(){return console.log(this.$store.getters.chatsForDesktop),this.$store.getters.chatsForDesktop}}},Gr=Wr,Hr=Object(d["a"])(Gr,Rr,Pr,!1,null,"63afc116",null),Jr=(Hr.exports,{components:{ContactCmp:Ur,ChatWindow:zr},computed:{chats:function(){return console.log(this.$store.getters.chatsForDesktop),this.$store.getters.chatsForDesktop}}}),Kr=Jr,Yr=(n("84cc"),Object(d["a"])(Kr,lr,pr,!1,null,"23f39690",null)),Vr=Yr.exports,Zr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{attrs:{src:t.imgSrc,alt:""},on:{click:t.toggleTheme}})},Qr=[],Xr={data:function(){return{isDark:!1}},methods:{toggleTheme:function(){document.querySelector("body").classList.toggle("dark"),this.isDark=!this.isDark}},computed:{imgSrc:function(){return this.isDark?"https://svgshare.com/i/EF4.svg":"https://svgshare.com/i/EH9.svg"}}},ti=Xr,ei=(n("9f60"),Object(d["a"])(ti,Zr,Qr,!1,null,"332d75b0",null)),ni=ei.exports,si=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mobile-bar"},[n("div",{staticClass:"main"},[n("i",{staticClass:"fas fa-home",on:{click:function(e){return t.$router.push("/")}}}),n("i",{staticClass:"fas fa-user",on:{click:function(e){return t.$router.push("/user/"+t.$store.getters.loggedInUser._id)}}}),n("app-notification"),n("friendship-request"),n("app-inbox")],1)])},ri=[],ii={components:{AppNotification:J,FriendshipRequest:it,AppInbox:j}},ai=ii,oi=(n("7e4b"),Object(d["a"])(ai,si,ri,!1,null,"51c00930",null)),ci=oi.exports,ui={components:{AppHeader:ur,AppChat:Vr,AppTheme:ni,MobileBar:ci},created:function(){this.$store.dispatch({type:"listenSocketEvents"})}},li=ui,pi=(n("034f"),Object(d["a"])(li,r,i,!1,null,null,null)),di=pi.exports,fi=n("2f62"),mi=n("8055"),hi=n.n(mi),gi="",vi=hi()(gi),bi={on:_i,emit:wi};function _i(t,e){vi.on(t,e)}function wi(t,e){vi.emit(t,e)}var yi={state:{loggedInUser:Es.getLoggedInUser(),activeUsers:[]},getters:{loggedInUser:function(t){return t.loggedInUser},activeUsers:function(t){return t.activeUsers}},mutations:{setUser:function(t,e){var n=e.user;t.loggedInUser=n},setActiveUsers:function(t,e){var n=e.activeUsers;t.activeUsers=n}},actions:{login:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.credentials,t.next=3,Es.login(s);case 3:r=t.sent,e.commit({type:"setUser",user:r}),bi.emit("user login",e.state.loggedInUser._id);case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),signup:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.credentials,t.prev=1,t.next=4,Es.signup(s);case 4:e.dispatch({type:"login",credentials:s}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log("ERROR: cant login");case 10:case"end":return t.stop()}},t,null,[[1,7]])}));function e(e,n){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Es.logout();case 3:e.commit({type:"setUser",user:null}),bi.emit("logout"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),saveUser:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.user,console.log(s,"UESER"),t.prev=2,t.next=5,Es.update(s);case 5:r=t.sent,e.commit({type:"setUser",user:r}),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](2),t.t0;case 12:case"end":return t.stop()}},t,null,[[2,9]])}));function e(e,n){return t.apply(this,arguments)}return e}()}},ji={state:{posts:[]},getters:{posts:function(t){return t.posts}},mutations:{setPosts:function(t,e){var n=e.posts;t.posts=n},save:function(t,e){var n=e.post;t.posts.unshift(n)},toggleLike:function(t,e){var n=e.postId,s=e.loggedInUser,r=s._id,i=s.username,a=t.posts.find(function(t){return t._id===n});if(a){var o=a.likedBy.findIndex(function(t){return t.userId===r});-1===o?a.likedBy.unshift({userId:r,username:i}):a.likedBy.splice(o,1)}},saveComment:function(t,e){var n=e.comment,s=t.posts.find(function(t){return t._id===n.postId});if(s){var r=s.comments.findIndex(function(t){return t._id===n._id});r>=0?s.comments.splice(r,1,n):s.comments.push(n)}}},actions:{loadPosts:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.filterBy,r=void 0===s?{}:s,r.user2Id=xs.app._route.params.userId,console.log("filterBy",r),t.next=5,wt.query(r);case 5:i=t.sent,e.commit({type:"setPosts",posts:i});case 7:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),addPost:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.post,t.next=3,wt.save(s);case 3:t.sent,e.dispatch({type:"loadPosts"});case 5:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),toggleLike:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,r=e.getters,n.userId,i=n.postId,a=r.loggedInUser,s("toggleLike",{postId:i,loggedInUser:a}),t.next=6,wt.toggleLike({postId:i,loggedInUser:a});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),saveComment:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.comment,t.next=3,wt.saveComment(s);case 3:r=t.sent,console.log(r),e.commit({type:"saveComment",comment:r});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}},Ci={query:Oi,add:ki,save:Ii};function ki(t){return xi.apply(this,arguments)}function xi(){return xi=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.post("api/friendship",e));case 1:case"end":return t.stop()}},t)})),xi.apply(this,arguments)}function Ii(t){return $i.apply(this,arguments)}function $i(){return $i=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.post("api/friendship",e));case 1:case"end":return t.stop()}},t)})),$i.apply(this,arguments)}function Oi(t){return Ui.apply(this,arguments)}function Ui(){return Ui=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/friendship/",e));case 1:case"end":return t.stop()}},t)})),Ui.apply(this,arguments)}var Ri={state:{suggests:[],friendshipUsers:[]},getters:{suggests:function(t,e){return t.suggests.filter(function(t){return!t.friendship&&t._id!==e.loggedInUser._id})},requestingUsers:function(t){return t.friendshipUsers.filter(function(t){return console.log(t.friendship.isApproved,t.friendship.user1Id===t._id),!t.friendship.isApproved&&t.friendship.user1Id===t._id})},approvedUsers:function(t){return t.friendshipUsers.filter(function(t){return t.friendship.isApproved})}},mutations:{setSuggests:function(t,e){var n=e.suggests;t.suggests=n},setFriendshipUsers:function(t,e){var n=e.friendshipUsers;t.friendshipUsers=n},saveUserFriendship:function(t,e){e.user}},actions:{saveFriendship:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.friendship,console.log("user store",s),t.next=4,Ci.save(s);case 4:r=t.sent,console.log("savedFriendship",r);case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),loadFriendshipUsers:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={isFriendship:!0},t.next=3,Es.query(n);case 3:s=t.sent,console.log("friendshipUsers",s),e.commit({type:"setFriendshipUsers",friendshipUsers:s});case 6:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),loadSuggests:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n.fiterBy,t.next=3,Es.query();case 3:s=t.sent,console.log("suggests",s),e.commit({type:"setSuggests",suggests:s});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}},Pi={query:Si,setAllSeen:Li,update:Fi};function Si(){return Ei.apply(this,arguments)}function Ei(){return Ei=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/notification"));case 1:case"end":return t.stop()}},t)})),Ei.apply(this,arguments)}function Li(){return Bi.apply(this,arguments)}function Bi(){return Bi=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),Bi.apply(this,arguments)}function Fi(t){return Ai.apply(this,arguments)}function Ai(){return Ai=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.put("api/notification",e));case 1:case"end":return t.stop()}},t)})),Ai.apply(this,arguments)}var Ti={state:{notifications:[]},getters:{notifications:function(t){return t.notifications},unSeenNotifications:function(t){return t.notifications.filter(function(t){return!t.isSeen})}},mutations:{setNotifications:function(t,e){var n=e.notifications;t.notifications=n},updateNotification:function(t,e){var n=e.notification,s=t.notifications.findIndex(function(t){return t._id===n._id});t.notifications.splice(s,1,n)}},actions:{loadNotifications:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pi.query();case 2:n=t.sent,e.commit({type:"setNotifications",notifications:n});case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),setAllSeen:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),updateNotification:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.notification,e.commit({type:"updateNotification",notification:s}),t.next=4,Pi.update(s);case 4:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}},qi={loadChatWith:Di};function Di(t){return Ni.apply(this,arguments)}function Ni(){return Ni=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Ss.get("api/chat",e));case 1:case"end":return t.stop()}},t)})),Ni.apply(this,arguments)}var Mi={state:{chats:[]},getters:{chats:function(t){return console.log(t.chats.length),t.chats},chatsForDesktop:function(t){return t.chats.slice(0,2)}},mutations:{addMsg:function(t,e){var n=e.msg,s=e.chatId,r=t.chats.find(function(t){return t._id===s});r.msgs.push(n)},pushChat:function(t,e){var n=e.chat,s=t.chats.findIndex(function(t){return t._id===n._id});s>=0&&t.chats.splice(s,1),t.chats.unshift(n)}},actions:{loadChatWith:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.userId,t.next=3,qi.loadChatWith({userId:s});case 3:r=t.sent,console.log("CHAT",r),e.commit({type:"pushChat",chat:r});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),addMsg:function(t,e){var n=e.msg,s=e.chatId,r=e.toUserId;t.commit({type:"addMsg",msg:n,chatId:s}),bi.emit("add msg",{msg:n,chatId:s,toUserId:r})},listenSocketEvents:function(t){function e(e){return console.log("context",t),t.getters.chats.find(function(t){return t._id===e})}bi.on("new msg",function(){var n=Object(dt["a"])(regeneratorRuntime.mark(function n(s,r){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!e(r)){n.next=4;break}t.commit({type:"addMsg",msg:s,chatId:r}),n.next=6;break;case 4:return n.next=6,t.dispatch({type:"loadChatWith",userId:s.userId});case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}())}}},zi={state:{},getters:{},mutations:{},actions:{listenSocketEvents:function(t){bi.emit("user login",this.getters.loggedInUser._id),bi.on("activeUsers changed",function(e){console.log("activeUsers",e),t.commit({type:"setActiveUsers",activeUsers:e})}),bi.on("new notification",function(e){console.log("SOCKET NOTIFICATION!"),t.dispatch({type:"loadNotifications"})}),bi.on("new friendship",function(){console.log("SOCKET FRIENDSHIP!"),t.dispatch({type:"loadFriendshipUsers"})})}}};s["a"].use(fi["a"]);var Wi=new fi["a"].Store({state:{},mutations:{},actions:{},modules:{UserStore:yi,PostStore:ji,FriendshipStore:Ri,NotificationStore:Ti,ChatStore:Mi,SocketStore:zi}}),Gi=Wi,Hi=(n("28a5"),n("c1df")),Ji=n.n(Hi);s["a"].filter("formatNum",function(t){return t.toLocaleString()}),s["a"].filter("timeAgo",function(t){return Ji()(t).fromNow()}),s["a"].filter("fUsername",function(t){t=t.toLowerCase();var e=t.split(" ");return e.map(function(t){return t[0].toUpperCase()+t.slice(1,t.length)}).join(" ")});var Ki=n("9483");Object(Ki["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),s["a"].config.productionTip=!1,new s["a"]({router:xs,store:Gi,render:function(t){return t(di)}}).$mount("#app")},"57e5":function(t,e,n){},"5c67":function(t,e,n){"use strict";var s=n("57e5"),r=n.n(s);r.a},"5ef5":function(t,e,n){},6001:function(t,e,n){},"607f":function(t,e,n){},6157:function(t,e,n){"use strict";var s=n("7e42"),r=n.n(s);r.a},"64a9":function(t,e,n){},"6b41":function(t,e,n){"use strict";var s=n("963e"),r=n.n(s);r.a},"720b":function(t,e,n){"use strict";var s=n("1fb2"),r=n.n(s);r.a},"755c":function(t,e,n){"use strict";var s=n("7a6c"),r=n.n(s);r.a},"75fc":function(t,e,n){},"7a6c":function(t,e,n){},"7e42":function(t,e,n){},"7e4b":function(t,e,n){"use strict";var s=n("e510"),r=n.n(s);r.a},"7ec4":function(t,e,n){},"80aa":function(t,e,n){},"83c5":function(t,e,n){"use strict";var s=n("6001"),r=n.n(s);r.a},"84cc":function(t,e,n){"use strict";var s=n("cf9d"),r=n.n(s);r.a},8674:function(t,e,n){"use strict";var s=n("95f2"),r=n.n(s);r.a},8735:function(t,e,n){},"87aa":function(t,e,n){"use strict";var s=n("13ed"),r=n.n(s);r.a},"8dc8":function(t,e,n){"use strict";var s=n("4433"),r=n.n(s);r.a},"8e44":function(t,e,n){t.exports=n.p+"img/like.7abf9b4e.png"},"93ad":function(t,e,n){"use strict";var s=n("1289"),r=n.n(s);r.a},"95f2":function(t,e,n){},"963e":function(t,e,n){},"96f0":function(t,e,n){"use strict";var s=n("ec2a"),r=n.n(s);r.a},"98bb":function(t,e,n){},"9f2e":function(t,e,n){},"9f55":function(t,e,n){},"9f60":function(t,e,n){"use strict";var s=n("80aa"),r=n.n(s);r.a},a2ae:function(t,e,n){"use strict";var s=n("9f55"),r=n.n(s);r.a},a6d0:function(t,e,n){"use strict";var s=n("e365"),r=n.n(s);r.a},aa21:function(t,e,n){"use strict";var s=n("cb2b"),r=n.n(s);r.a},ac42:function(t,e,n){"use strict";var s=n("98bb"),r=n.n(s);r.a},ad52:function(t,e,n){},b440:function(t,e,n){"use strict";var s=n("f7c2"),r=n.n(s);r.a},b88a:function(t,e,n){},bee0:function(t,e,n){},bfc3:function(t,e,n){"use strict";var s=n("d321"),r=n.n(s);r.a},c8b8:function(t,e,n){"use strict";var s=n("7ec4"),r=n.n(s);r.a},c9c8:function(t,e,n){"use strict";var s=n("fb5e"),r=n.n(s);r.a},cb2b:function(t,e,n){},cedb:function(t,e,n){"use strict";var s=n("fc48"),r=n.n(s);r.a},cf9d:function(t,e,n){},d188:function(t,e,n){"use strict";var s=n("2616"),r=n.n(s);r.a},d321:function(t,e,n){},d5a1:function(t,e,n){"use strict";var s=n("8735"),r=n.n(s);r.a},d65f:function(t,e,n){"use strict";var s=n("607f"),r=n.n(s);r.a},d6e0:function(t,e,n){},dc14:function(t,e,n){"use strict";var s=n("5ef5"),r=n.n(s);r.a},dc68:function(t,e,n){},e365:function(t,e,n){},e429:function(t,e,n){t.exports=n.p+"img/image.b651739e.png"},e510:function(t,e,n){},e91b:function(t,e,n){"use strict";var s=n("ad52"),r=n.n(s);r.a},e9c6:function(t,e,n){},ec2a:function(t,e,n){},f474:function(t,e,n){"use strict";var s=n("dc68"),r=n.n(s);r.a},f7c2:function(t,e,n){},fa01:function(t,e,n){},fb5e:function(t,e,n){},fc48:function(t,e,n){}});
//# sourceMappingURL=app.d94c544f.js.map