(function(t){function e(e){for(var s,a,o=e[0],c=e[1],u=e[2],p=0,d=[];p<o.length;p++)a=o[p],r[a]&&d.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var s={},r={app:0},i=[];function a(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=s,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01e9":function(t,e,n){"use strict";var s=n("bee0"),r=n.n(s);r.a},"0302":function(t,e,n){"use strict";var s=n("55e9"),r=n.n(s);r.a},"034f":function(t,e,n){"use strict";var s=n("64a9"),r=n.n(s);r.a},"0b0e":function(t,e,n){"use strict";var s=n("133e"),r=n.n(s);r.a},"0b56":function(t,e,n){"use strict";var s=n("75fc"),r=n.n(s);r.a},1:function(t,e){},"11c4":function(t,e,n){"use strict";var s=n("d6e0"),r=n.n(s);r.a},"133e":function(t,e,n){},"13ed":function(t,e,n){},"170f":function(t,e,n){},"18e6":function(t,e,n){"use strict";var s=n("2769"),r=n.n(s);r.a},"1cda":function(t,e,n){"use strict";var s=n("f28f"),r=n.n(s);r.a},"1e7f":function(t,e,n){"use strict";var s=n("9f2e"),r=n.n(s);r.a},"23ba":function(t,e,n){},2616:function(t,e,n){},2769:function(t,e,n){},"29be":function(t,e,n){"use strict";var s=n("6f8c"),r=n.n(s);r.a},"33ea":function(t,e,n){"use strict";var s=n("9d81"),r=n.n(s);r.a},"3a6a":function(t,e,n){},"3ba9":function(t,e,n){"use strict";var s=n("23ba"),r=n.n(s);r.a},4433:function(t,e,n){},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=i(t);return n(e)}function i(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(s)},r.resolve=i,t.exports=r,r.id="4678"},"48d5":function(t,e,n){},"502b":function(t,e,n){"use strict";var s=n("943b"),r=n.n(s);r.a},5070:function(t,e,n){},"55e9":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("app-header"),n("router-view",{staticClass:"router"}),n("app-chat"),n("mobile-bar")],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"pseudo-header"},[n("header",[t.loggedInUser?n("main",[n("div",{staticClass:"wrapper"},[n("i",{staticClass:"fab fa-facebook-square logo",on:{click:function(e){return t.$router.push("/")}}}),n("app-search")],1),n("div",{staticClass:"wrapper hide-mobile"},[n("div",{staticClass:"link-container",on:{click:function(e){return t.$router.push("/user/"+t.loggedInUser._id)}}},[n("img",{attrs:{src:t.loggedInUser.url.profileImg}}),t._v("\n            "+t._s(t.loggedInUser.username)+"\n          ")]),n("div",{staticClass:"sep"}),n("span",{staticClass:"link-container",on:{click:function(e){return t.$router.push("/")}}},[t._v("Home")]),n("div",{staticClass:"sep"}),n("app-updates"),n("div",{staticClass:"sep"})],1),n("app-register")],1):n("main",[n("img",{staticClass:"literal-logo",attrs:{src:"https://www.facebook.com/rsrc.php/v3/y4/r/gf6iHxsw8zm.png",alt:""}}),n("app-register")],1)])])},o=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[t.user?n("i",{staticClass:"fas fa-sign-out-alt header-icon",attrs:{title:"logout"},on:{click:t.logout}}):n("div",{staticClass:"app-register"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],attrs:{type:"text",placeholder:"Password"},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}}),n("button",{on:{click:t.login}},[t._v("Log In")]),n("button",{on:{click:t.signup}},[t._v("Sign Up")])])])},u=[],l={data:function(){return{credentials:{email:"",password:""}}},computed:{user:function(){return this.$store.getters.loggedInUser}},methods:{login:function(){this.$store.dispatch({type:"login",credentials:this.credentials}),this.credentials={email:"",password:""}},signup:function(){this.credentials.username=prompt("username is?"),this.credentials.url={},this.credentials.url.profileImg="https://api.adorable.io/avatars/212/".concat(this.credentials.username,".png"),this.credentials.joinedAt=Date.now(),this.$store.dispatch({type:"signup",credentials:this.credentials})},logout:function(){this.$store.dispatch({type:"logout"})}}},p=l,d=(n("33ea"),n("2877")),f=Object(d["a"])(p,c,u,!1,null,"7ff9beba",null),m=f.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-updates"},[n("friend-request"),n("app-msg"),n("app-notification")],1)},g=[],v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("i",{staticClass:"fab fa-facebook-messenger header-icon"})])}],_={},w=_,y=Object(d["a"])(w,v,b,!1,null,"457f6d18",null),j=y.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.toggleWindow}},[n("audio",{attrs:{id:"notificationSound",src:"https://vocaroo.com/media_command.php?media=s0vVbhgcma0r&command=download_mp3"}}),n("i",{staticClass:"fas fa-bell header-icon",class:t.classObj}),n("unseen-count",{attrs:{unseen:t.unseen}}),t.isWindow?n("updates-window",[n("span",{attrs:{slot:"top"},slot:"top"},[t._v("Notificatios")]),n("span",{attrs:{slot:"content"},slot:"content"},t._l(t.notifications,function(t){return n("notification-preview",{key:t._id,attrs:{notification:t}})}),1)]):t._e()],1)},k=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.unseen.length?n("span",[t._v(t._s(t.unseen.length))]):t._e()},I=[],$={props:["unseen"]},O=$,U=(n("b209"),Object(d["a"])(O,x,I,!1,null,"f38149be",null)),R=U.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"updates-window floating-box"},[n("div",{staticClass:"top"},[t._t("top")],2),n("div",{staticClass:"content-container"},[t._t("content",[t._v("Lorem ipsum dolor sit amet consectetur, adipisicing elit. Laborum corrupti neque recusandae beatae optio, libero saepe nam voluptatem! Saepe laboriosam optio nihil consequuntur distinctio quo quia, eius tempore fuga porro.")])],2)])},S=[],L={},E=L,B=(n("0b56"),Object(d["a"])(E,P,S,!1,null,"5388d5be",null)),F=B.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notification-preview",class:t.classObj,on:{click:t.readPost}},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.notification.imgUrl,alt:""}})]),n("div",{domProps:{innerHTML:t._s(t.notification.txt)}})])},q=[],T={props:["notification"],computed:{classObj:function(){return{unseen:!this.notification.isSeen}}},methods:{readPost:function(){this.$router.push("/post/".concat(this.notification.postId))}},mounted:function(){var t=this;this.notification.isSeen||setTimeout(function(){t.notification.isSeen=!0,t.$store.dispatch({type:"updateNotification",notification:t.notification})},1e3)}},W=T,D=(n("cedb"),Object(d["a"])(W,A,q,!1,null,"5451aa42",null)),N=D.exports,M=n("5118"),z={components:{UnseenCount:R,UpdatesWindow:F,NotificationPreview:N},data:function(){return{isWindow:!1}},computed:{notifications:function(){return this.$store.getters.notifications},unseen:function(){return this.$store.getters.unSeenNotifications},classObj:function(){return{unseen:this.unseen.length}}},methods:{toggleWindow:function(){console.log("tog"),this.isWindow=!this.isWindow}},created:function(){var t=this;this.$store.dispatch({type:"loadNotifications"}),document.querySelector("body").addEventListener("mouseup",function(e){t.isWindow&&Object(M["setTimeout"])(function(){t.isWindow=!1},500)})},watch:{"unseen.length":function(){this.unseen.length&&(console.log("qwdqw"),document.getElementById("notificationSound").play())}}},G=z,H=(n("1cda"),Object(d["a"])(G,C,k,!1,null,"9fb9f2a8",null)),J=H.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"friendship-request",on:{click:t.toggleWindow}},[n("i",{staticClass:"fas fa-user-friends header-icon",class:t.classObj}),n("unseen-count",{attrs:{unseen:t.unseen}}),t.isWindow?n("updates-window",[n("span",{attrs:{slot:"top"},slot:"top"},[t._v("Friend Requests")]),n("span",{attrs:{slot:"content"},slot:"content"},t._l(t.requestingUsers,function(t){return n("request-preview",{key:t._id,attrs:{user:t}})}),1)]):t._e()],1)},K=[],Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"request-preview"},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}}),n("a",{staticClass:"username"},[t._v(t._s(t.user.username))])]),n("div",[n("button",{staticClass:"confirm",on:{click:t.confirmFriendship}},[t._v("Confirm")]),n("button",{staticClass:"delete"},[t._v("Delete")])])])},Z=[],Q={props:["user"],methods:{confirmFriendship:function(){this.user.friendship.isApproved=!0,this.$store.dispatch({type:"saveFriendship",friendship:this.user.friendship})}}},X=Q,tt=(n("87aa"),Object(d["a"])(X,Y,Z,!1,null,"c29f6aae",null)),et=tt.exports,nt={components:{UpdatesWindow:F,unseenCount:R,RequestPreview:et},data:function(){return{isWindow:!1}},computed:{unseen:function(){return this.$store.getters.requestingUsers.filter(function(t){return!t.isSeen})},requestingUsers:function(){return console.log("requestingUsers",this.$store.getters.requestingUsers),this.$store.getters.requestingUsers},classObj:function(){return{unseen:this.unseen.length}}},methods:{toggleWindow:function(){this.isWindow=!this.isWindow}},created:function(){var t=this;document.querySelector("body").addEventListener("mousedown",function(){t.isWindow&&setTimeout(function(){t.isWindow=!1},500)})}},st=nt,rt=(n("a4b7"),Object(d["a"])(st,V,K,!1,null,"1428dbe0",null)),it=rt.exports,at={components:{AppMsg:j,AppNotification:J,FriendRequest:it}},ot=at,ct=(n("8674"),Object(d["a"])(ot,h,g,!1,null,"2ae8b072",null)),ut=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-container"},[n("div",{staticStyle:{position:"relative"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.txt,expression:"filterBy.txt"}],attrs:{type:"text",placeholder:"Search"},domProps:{value:t.filterBy.txt},on:{input:[function(e){e.target.composing||t.$set(t.filterBy,"txt",e.target.value)},t.onInput]}}),t.isLoading?n("my-loader",{staticClass:"loader"}):t._e()],1),n("div",{staticClass:"result-list",on:{click:t.clearInput}},t._l(t.users,function(e){return t.filterBy.txt?n("user-preview",{attrs:{user:e}}):t._e()}),1)])},pt=[],dt=(n("96cf"),n("3b8d")),ft=n("8c4f"),mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("section",{staticClass:"user-profile"},[n("user-details",{staticClass:"user-details",attrs:{user:t.user}}),n("section",{staticClass:"flex"},[n("main",[n("app-post",{staticClass:"app-post"}),n("joined-facebook",{attrs:{time:t.user.joinedAt}})],1),n("aside",[n("user-friends",{attrs:{friends:t.user.friends}}),n("friend-suggest",{staticClass:"friend-suggest"})],1)])],1):t._e()},ht=[],gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"app-post"},[n("add-post"),n("post-list")],1)},vt=[],bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.user&&t.post?s("div",{staticClass:"add-post floating-box",class:t.classObj},[s("header",[t._v("Create Post")]),"gradient"!==t.post.type?s("main",[s("div",{staticClass:"profile-image-container-thumb"},[s("img",{attrs:{src:t.user.url.profileImg,alt:""}})]),s("section",{staticStyle:{"flex-grow":"1"}},[s("div",{ref:"contenteditable",staticClass:"input-container",attrs:{contenteditable:"",placeholder:t.placeholder},on:{input:t.onInput}})]),s("div",{staticClass:"realtive-wrapper"},[s("content-preview",{attrs:{type:t.post.type,content:t.post.content,post:t.post}}),t.isLoadingContentPreview?s("my-loader"):t._e()],1)]):s("div",{ref:"contenteditable",staticClass:"gradient",class:t.post.gradientClass,attrs:{placeholder:t.placeholder,contenteditable:""},on:{input:t.onInput}}),s("footer",[s("div",{staticClass:"main"},[s("upload-image",{ref:"imageInput",staticStyle:{display:"none"},on:{setImageUrl:t.setImageUrl}}),s("div",{staticClass:"post-type-container"},[s("div",{staticClass:"post-type",on:{click:t.clickImageInput}},[s("img",{attrs:{src:n("e429"),alt:""}}),t._v("\n            Photo\n          ")])]),s("div",{staticClass:"gradient-container"},[s("div",{staticClass:"regular",on:{click:t.clearType}}),s("div",{staticClass:"purple",on:{click:function(e){return t.setGradient("purple")}}}),s("div",{staticClass:"party-small",on:{click:function(e){return t.setGradient("party")}}}),s("div",{staticClass:"poop-small",on:{click:function(e){return t.setGradient("poop")}}}),s("div",{staticClass:"fire-small",on:{click:function(e){return t.setGradient("fire")}}}),s("div",{staticClass:"smiley-small",on:{click:function(e){return t.setGradient("smiley")}}})]),s("button",{on:{click:t.addPost}},[s("i",{staticClass:"fas fa-globe-americas"}),t._v(" Publish\n        ")])],1)])]):t._e()])},_t=[],wt=(n("4be7"),{save:Ct,query:Ut,toggleLike:xt,saveComment:$t,getById:yt});function yt(t){return jt.apply(this,arguments)}function jt(){return jt=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/post/".concat(e)));case 1:case"end":return t.stop()}},t)})),jt.apply(this,arguments)}function Ct(t){return kt.apply(this,arguments)}function kt(){return kt=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qs.post("api/post",e);case 2:return n=t.sent,console.log("service:",n),t.abrupt("return",n);case 5:case"end":return t.stop()}},t)})),kt.apply(this,arguments)}function xt(t){return It.apply(this,arguments)}function It(){return It=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.userId,s=e.postId,t.next=3,qs.post("api/post/like",{userId:n,postId:s});case 3:console.log("like toggled");case 4:case"end":return t.stop()}},t)})),It.apply(this,arguments)}function $t(t){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qs.post("api/post/comment",e);case 2:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),Ot.apply(this,arguments)}function Ut(t){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qs.get("api/post",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)})),Rt.apply(this,arguments)}var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.type?n("section",{staticClass:"content-preview"},[n(t.component,{tag:"component",attrs:{content:t.content,post:t.post}})],1):t._e()},St=[],Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-container"},[n("img",{attrs:{src:t.content}})])},Et=[],Bt={props:["content"]},Ft=Bt,At=(n("1e7f"),Object(d["a"])(Ft,Lt,Et,!1,null,"597c009c",null)),qt=At.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{ref:"contenteditable",staticClass:"gradient gradient-preview",class:t.post.gradientClass},[t._v(t._s(t.post.txt))])])},Wt=[],Dt={props:["post"],methods:{setContent:function(){this.$parent.$emit("setGradientTxt",this.$refs.contenteditable.innerText)}}},Nt=Dt,Mt=Object(d["a"])(Nt,Tt,Wt,!1,null,"3a0eff6a",null),zt=Mt.exports,Gt={props:["type","content","post"],components:{ImagePreview:qt,GradientPreview:zt},computed:{component:function(){return this.type+"-preview"}}},Ht=Gt,Jt=(n("18e6"),Object(d["a"])(Ht,Pt,St,!1,null,"22fa1312",null)),Vt=Jt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"file",name:"",id:""},on:{change:t.imageChanged}})},Yt=[],Zt={uploadImage:Qt};function Qt(t){var e="benpinchas1",n="https://api.cloudinary.com/v1_1/".concat(e,"/image/upload"),s=new FormData;return s.append("file",t.target.files[0]),s.append("upload_preset","hj7a9uwm"),fetch(n,{method:"POST",body:s}).then(function(t){return t.json()}).then(function(t){return t.secure_url}).catch(function(t){throw console.error(t),t})}var Xt={methods:{imageChanged:function(t){console.log(t);var e=Zt.uploadImage(t);this.$emit("setImageUrl",e)}}},te=Xt,ee=Object(d["a"])(te,Kt,Yt,!1,null,"870240a8",null),ne=ee.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{staticClass:"loader",attrs:{src:"https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/3Wf1AkaVBVk.gif",alt:""}})},re=[],ie={},ae=ie,oe=(n("01e9"),Object(d["a"])(ae,se,re,!1,null,"79e89c6c",null)),ce=oe.exports,ue={components:{ContentPreview:Vt,UploadImage:ne,MyLoader:ce},data:function(){return{isLoadingPublishPost:!1,isLoadingContentPreview:!1,post:null}},computed:{user:function(){return this.$store.getters.loggedInUser},placeholder:function(){return this.$store.getters.loggedInUser?"What's on your mind, "+this.$store.getters.loggedInUser.username+"?":null},classObj:function(){return{loading:this.isLoadingPublishPost}}},methods:{addPost:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadingPublishPost=!0,t.next=3,this.$store.dispatch({type:"addPost",post:this.post});case 3:this.clearPost(),this.isLoadingPublishPost=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clearPost:function(){this.$store.getters.loggedInUser&&(this.$refs.contenteditable&&(this.$refs.contenteditable.innerText=""),this.post={at:Date.now(),userId:this.$store.getters.loggedInUser._id,user2Id:this.$route.params.userId||this.$store.getters.loggedInUser._id,txt:"",type:"",content:"",gradientClass:"a",comments:[],likedBy:[]},console.log(this.post))},onInput:function(){this.post.txt=this.$refs.contenteditable.innerText},setGradient:function(t){this.post.type="gradient",this.post.gradientClass=t},clearType:function(){this.post.type=""},clickImageInput:function(){this.$refs.imageInput.$el.click()},setImageUrl:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadingContentPreview=!0,t.prev=1,this.post.type="image",t.next=5,e;case 5:this.post.content=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:return t.prev=11,this.isLoadingContentPreview=!1,t.finish(11);case 14:console.log(this.post.content);case 15:case"end":return t.stop()}},t,this,[[1,8,11,14]])}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){this.clearPost()},watch:{"$route.params.userId":function(){console.log(this.$route.params.userId),this.clearPost()}}},le=ue,pe=(n("8dfb"),Object(d["a"])(le,bt,_t,!1,null,"72cfddfc",null)),de=pe.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-list"},t._l(t.posts,function(e){return n("post-preview",{key:e._id,attrs:{post:e}},[t._v(t._s(e._id))])}),1)},me=[],he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.user?s("div",{staticClass:"post-preview floating-box"},[s("main",[s("header",[s("div",{staticClass:"profile-image-container-thumb"},[s("img",{attrs:{src:t.user.url.profileImg,alt:""}})]),s("div",{staticClass:"info-container",staticStyle:{"padding-top":"3px"}},[s("div",{staticStyle:{"margin-bottom":"5px"}},[s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toUserProfile(e)}}},[t._v(t._s(t._f("fUsername")(t.user.username)))]),t.post.userId!==t.post.user2Id?s("span",[t._v("\n             ▸ \n            "),s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/user/"+t.post.user2Id)}}},[t._v(t._s(t._f("fUsername")(t.post.user2.username)))])]):t._e()]),s("div",{staticClass:"time-container system-color"},[s("span",{staticClass:"time",on:{click:function(e){return t.$router.push("/post/"+t.post._id)}}},[t._v(t._s(t._f("timeAgo")(t.post.at)))]),t._v("\n          ·\n          "),s("i",{staticClass:"fas fa-globe-americas"})])])]),"gradient"!==t.post.type?s("div",{staticStyle:{"font-size":"15px","margin-bottom":"12px"},domProps:{innerHTML:t._s(t.post.txt)}}):t._e()]),s("content-preview",{attrs:{type:t.post.type,content:t.post.content,post:t.post}}),s("footer",[s("div",{staticClass:"stats-container system-color"},[s("p",{staticClass:"like-count"},[t.post.likedBy.length?s("span",[s("img",{attrs:{src:n("8e44"),alt:""}}),t._v(" "+t._s(t.post.likedBy.length))]):t._e()]),s("p",{staticClass:"comment-count",on:{click:t.toggleComments}},[t.post.comments.length?s("span",[t._v(t._s(t.post.comments.length)+" Comments")]):t._e()])]),s("interactions-btns",{attrs:{isLiked:t.isLiked},on:{toggleLike:t.toggleLike,toggleComments:t.toggleComments}})],1),t.showComments?s("post-comments",{attrs:{comments:t.post.comments},on:{addComment:t.addComment}}):t._e()],1):t._e()},ge=[],ve=(n("7514"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"interactions-btns"},[n("button",{class:t.likeBtnClass,on:{click:t.toggleLike}},[n("i",{staticClass:"far fa-thumbs-up"}),t._v(" Like\n  ")]),n("button",{on:{click:t.toggleComments}},[n("i",{staticClass:"far fa-comment"}),t._v(" Comment\n  ")]),t._m(0)])}),be=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",[n("i",{staticClass:"fas fa-share"}),t._v(" Share\n  ")])}],_e={props:["isLiked"],computed:{likeBtnClass:function(){return{liked:this.isLiked}}},methods:{toggleLike:function(){this.$emit("toggleLike")},toggleComments:function(){this.$emit("toggleComments")}}},we=_e,ye=(n("b440"),Object(d["a"])(we,ve,be,!1,null,"fbd28626",null)),je=ye.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post-comment"},[n("add-comment",{on:{addComment:t.addComment}}),n("comment-list",{attrs:{comments:t.comments}})],1)},ke=[],xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedInUser?n("div",{staticClass:"add-comment"},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.loggedInUser.url.profileImg,alt:""}})]),n("div",{staticClass:"realtive"}),n("div",{ref:"contenteditable",staticClass:"comment-container dark-set-1",attrs:{placeholder:"Write a comment...",contenteditable:""}}),n("button",{staticClass:"submit-btn",on:{click:t.addComment}},[n("i",{staticClass:"fas fa-arrow-circle-up"})])]):t._e()},Ie=[],$e={computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},mounted:function(){this.$refs.contenteditable.focus()},methods:{addComment:function(){this.$emit("addComment",this.$refs.contenteditable.innerText),this.$refs.contenteditable.innerText=""}}},Oe=$e,Ue=(n("a427"),Object(d["a"])(Oe,xe,Ie,!1,null,"78b85c5e",null)),Re=Ue.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},t._l(t.comments,function(t){return n("comment-preview",{attrs:{comment:t}})}),1)},Se=[],Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-preview"},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.comment.owner.profileImg,alt:""}})]),n("div",[n("div",{staticClass:"comment-container dark-set-1"},[n("div",{staticClass:"name-container",staticStyle:{"margin-bottom":"3px"}},[n("a",{staticClass:"username-color",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.readUser(e)}}},[t._v(t._s(t._f("fUsername")(t.comment.owner.username)))])]),n("div",{staticStyle:{padding:"2px"}},[t._v(t._s(t.comment.txt))]),t.likesCount?n("like-count",{attrs:{likesCount:t.likesCount}}):t._e()],1),n("div",{staticClass:"actions-container"},[n("a",{class:t.likeClassObj,on:{click:t.toggleLike}},[t._v("Like")]),t._v("  ·  "+t._s(t._f("timeAgo")(t.comment.at))+"\n    ")])])])},Ee=[],Be=(n("8e6e"),n("ac6a"),n("456d"),n("20d6"),n("bd86")),Fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"like-count"},[t._m(0),n("span",{staticClass:"count"},[t._v(t._s(t.likesCount))])])},Ae=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img-container"},[s("img",{attrs:{src:n("8e44"),alt:""}})])}],qe={props:["likesCount"]},Te=qe,We=(n("0302"),Object(d["a"])(Te,Fe,Ae,!1,null,"0d148901",null)),De=We.exports;function Ne(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ne(n,!0).forEach(function(e){Object(Be["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ne(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ze={props:["comment"],components:{LikeCount:De},computed:{likesCount:function(){return this.comment.likedBy.length},likeClassObj:function(){var t=this;return{liked:this.comment.likedBy.find(function(e){return e.userId===t.$store.getters.loggedInUser._id})}}},methods:{readUser:function(){this.$router.push("/user/".concat(this.comment.owner.userId))},toggleLike:function(){var t=this,e=Me({},this.comment),n=e.likedBy.findIndex(function(e){return e.userId===t.$store.getters.loggedInUser._id});n>=0?e.likedBy.splice(n,1):e.likedBy.push({userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username}),this.$store.dispatch({type:"saveComment",comment:e})}}},Ge=ze,He=(n("11c4"),Object(d["a"])(Ge,Le,Ee,!1,null,"7d538af6",null)),Je=He.exports,Ve={props:["comments"],components:{CommentPreview:Je}},Ke=Ve,Ye=(n("6b41"),Object(d["a"])(Ke,Pe,Se,!1,null,"703da9d7",null)),Ze=Ye.exports,Qe={props:["comments"],components:{AddComment:Re,CommentList:Ze},methods:{addComment:function(t){this.$emit("addComment",t)}}},Xe=Qe,tn=(n("8dc8"),Object(d["a"])(Xe,Ce,ke,!1,null,"1d7fb313",null)),en=tn.exports,nn={props:["post"],components:{InteractionsBtns:je,PostComments:en,ContentPreview:Vt},data:function(){return{showComments:!1}},computed:{user:function(){return this.post.user},isLiked:function(){var t=this;return!!this.$store.getters.loggedInUser&&this.post.likedBy.find(function(e){return e.userId===t.$store.getters.loggedInUser._id})}},methods:{toggleComments:function(){this.showComments=!this.showComments},toggleLike:function(){this.$store.dispatch({type:"toggleLike",userId:this.$store.getters.loggedInUser._id,postId:this.post._id})},addComment:function(t){var e={at:Date.now(),_id:Math.random()+"",postId:this.post._id,txt:t,owner:{userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username,profileImg:this.$store.getters.loggedInUser.url.profileImg},likedBy:[]};this.$store.dispatch({type:"saveComment",comment:e})},toUserProfile:function(){this.$router.push("/user/".concat(this.post.user._id))}}},sn=nn,rn=(n("fcbb"),Object(d["a"])(sn,he,ge,!1,null,"726597ce",null)),an=rn.exports,on={components:{PostPreview:an},computed:{posts:function(){return this.$store.getters.posts}},methods:{loadPosts:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.userId,t.next=3,this.$store.dispatch({type:"loadPosts",filterBy:{userId:e}});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadPosts()},watch:{"$route.params.userId":function(){this.loadPosts()}}},cn=on,un=(n("a2ae"),Object(d["a"])(cn,fe,me,!1,null,"e7f7a0e0",null)),ln=un.exports,pn={components:{AddPost:de,PostList:ln}},dn=pn,fn=Object(d["a"])(dn,gt,vt,!1,null,"4d946fad",null),mn=fn.exports,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("side-box",[n("span",{attrs:{slot:"headline"},slot:"headline"},[t._v("People You May Know")]),n("span",{attrs:{slot:"main"},slot:"main"},t._l(t.suggests,function(t){return n("suggest-preview",{attrs:{user:t}})}),1)])],1)},gn=[],vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root-el floating-box"},[n("header",[n("span",{staticClass:"system-txt"},[t._t("headline",[t._v("Default headline")])],2)]),n("main",[t._t("main",[t._v("Default main")])],2)])},bn=[],_n={},wn=_n,yn=(n("bfc3"),Object(d["a"])(wn,vn,bn,!1,null,null,null)),jn=yn.exports,Cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",{staticClass:"g-user-snippet-container-small"},[n("div",{staticClass:"g-profile-image-container-thumb-small"},[n("img",{attrs:{src:t.user.url?t.user.url.profileImg:null}})]),n("div",{staticClass:"secondary-container"},[n("div",{staticStyle:{"margin-bottom":"3px"}},[n("a",{on:{click:function(e){return e.preventDefault(),t.readUser(e)}}},[t._v(t._s(t.user.username))])]),n("div",{staticClass:"btns-container"},[n("friendship-btn",{staticClass:"friendship-btn",attrs:{user:t.user}})],1)])])])},kn=[],xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["add"===t.type?n("button",{on:{click:t.addFriendship}},[n("i",{staticClass:"fas fa-user-plus"}),t._v(" Add Friend\n  ")]):t._e(),"approved"===t.type?n("button",{attrs:{disabled:""}},[n("i",{staticClass:"fas fa-check"}),t._v(" Friends\n  ")]):t._e(),"confirm"===t.type?n("button",{on:{click:t.approveFriendship}},[n("i",{staticClass:"fas fa-user-plus"}),t._v(" Confirm\n  ")]):t._e(),"sent"===t.type?n("button",{attrs:{disabled:""}},[n("i",{staticClass:"fas fa-share"}),t._v(" Friend Request Sent\n  ")]):t._e()])},In=[],$n={props:["user"],data:function(){return{}},computed:{type:function(){return this.$store.getters.loggedInUser&&this.user._id!==this.$store.getters.loggedInUser._id?this.user.friendship?this.user.friendship.isApproved?"approved":this.user.friendship.user1Id===this.user._id?"confirm":"sent":"add":null}},methods:{addFriendship:function(){var t={user1Id:this.$store.getters.loggedInUser._id,user2Id:this.user._id,at:Date.now(),isApproved:!1,isSeen:!1,msg:[{txt:"hello"},{txt:"shalom"}]};this.user.friendship=t,this.$store.dispatch({type:"saveFriendship",friendship:t}),console.log("OK")},approveFriendship:function(){this.user.friendship.isApproved=!0,this.$store.dispatch({type:"saveFriendship",friendship:this.user.friendship})}},mounted:function(){console.log("USER:",this.user)}},On=$n,Un=(n("dc14"),Object(d["a"])(On,xn,In,!1,null,"4a2da10a",null)),Rn=Un.exports,Pn={props:["user"],components:{FriendshipBtn:Rn},data:function(){return{}},methods:{readUser:function(){this.$router.push("/user/".concat(this.user._id))}}},Sn=Pn,Ln=(n("5f96"),Object(d["a"])(Sn,Cn,kn,!1,null,"6ecc99c6",null)),En=Ln.exports,Bn={components:{SideBox:jn,SuggestPreview:En},computed:{suggests:function(){return console.log(" this.$store.getters.suggests",this.$store.getters.suggests),this.$store.getters.suggests}},created:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch({type:"loadSuggests"}),this.$store.dispatch({type:"loadFriendshipUsers"});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},Fn=Bn,An=(n("96f0"),Object(d["a"])(Fn,hn,gn,!1,null,null,null)),qn=An.exports,Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShow?n("section",{staticClass:"user-profile"},[t.user?n("div",{staticClass:"main dark-set-2"},[n("div",{staticClass:"cover-img-container",style:{"background-image":"url("+t.user.url.coverImg+")"}},[t.isLoadCoverImg?n("my-loader"):t._e(),t.canEdit?n("upload-image",{staticClass:"custom-file-input cover-img-input",on:{setImageUrl:t.setCoverImage}}):t._e()],1),n("div",{staticClass:"profile-img-container"},[n("div",{staticStyle:{position:"relative"}},[n("img",{staticClass:"profile-img",attrs:{src:t.user.url.profileImg,alt:""}}),t.canEdit?n("upload-image",{staticClass:"custom-file-input profile-img-input",on:{setImageUrl:t.setProfileImage}}):t._e(),t.isLoadProfileImg?n("my-loader"):t._e()],1),n("h1",{staticClass:"username"},[t._v(t._s(t._f("fUsername")(t.user.username)))])]),n("div",{staticClass:"btns-container"},[n("friendship-button",{attrs:{user:t.user}}),n("button",{on:{click:t.startChat}},[n("i",{staticClass:"fab fa-facebook-messenger"}),t._v(" Message\n      ")])],1)]):t._e()]):t._e()},Wn=[],Dn={components:{UploadImage:ne,MyLoader:ce,FriendshipButton:Rn},props:["user"],data:function(){return{isLoadProfileImg:!1,isLoadCoverImg:!1}},computed:{isShow:function(){return this.$route.params.userId},friendshipStatus:function(){var t=this,e=this.$store.getters.friendships.find(function(e){return e.user1.userId===t.user._id||e.user2.userId===t.user._id});return e?e.isApproved?"approved":e.user2.userId===this.user._id?"Sent":"You need to confirm":"not friends"},canEdit:function(){return!!this.$store.getters.loggedInUser&&this.user._id===this.$store.getters.loggedInUser._id}},methods:{setProfileImage:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadProfileImg=!0,n=this.user.url.profileImg,t.prev=2,t.next=5,e;case 5:return s=t.sent,this.user.url.profileImg=s,t.next=9,this.$store.dispatch({type:"saveUser",user:this.user});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),this.user.url.profileImg=n;case 14:return t.prev=14,this.isLoadProfileImg=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,11,14,17]])}));function e(e){return t.apply(this,arguments)}return e}(),setCoverImage:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoadCoverImg=!0,n=this.user.url.coverImg,t.prev=2,t.next=5,e;case 5:return s=t.sent,this.user.url.coverImg=s,t.next=9,this.$store.dispatch({type:"saveUser",user:this.user});case 9:console.log("user saved"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),this.user.url.coverImg=n;case 15:return t.prev=15,this.isLoadCoverImg=!1,t.finish(15);case 18:case"end":return t.stop()}},t,this,[[2,12,15,18]])}));function e(e){return t.apply(this,arguments)}return e}(),startChat:function(){this.$store.dispatch({type:"loadChatWith",userId:this.user._id})}}},Nn=Dn,Mn=(n("8faf"),Object(d["a"])(Nn,Tn,Wn,!1,null,"046e6d7a",null)),zn=Mn.exports,Gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("side-box",[n("span",{attrs:{slot:"headline"},slot:"headline"},[t._v("Friends  · "+t._s(t.friends.length))]),n("div",{staticClass:"user-list",attrs:{slot:"main"},slot:"main"},t._l(t.friends,function(t){return n("user-preview",{attrs:{user:t}})}),1)])},Hn=[],Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-preview",style:{"background-image":"url("+t.user.url.profileImg+")"},on:{click:t.readUser}},[n("div",{staticClass:"overlay"},[n("span",{staticClass:"username"},[t._v(t._s(t._f("fUsername")(t.user.username)))])])])},Vn=[],Kn={props:["user"],methods:{readUser:function(){this.$router.push("/user/".concat(this.user._id))}}},Yn=Kn,Zn=(n("0b0e"),Object(d["a"])(Yn,Jn,Vn,!1,null,"021e0508",null)),Qn=Zn.exports,Xn={components:{SideBox:jn,UserPreview:Qn},props:["friends"]},ts=Xn,es=(n("e91b"),Object(d["a"])(ts,Gn,Hn,!1,null,"467dc50a",null)),ns=es.exports,ss=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"floating-box root-el"},[n("img",{staticClass:"logo",attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/f/ff/Facebook_logo_36x36.svg",alt:""}}),n("h2",[t._v("Joined Facebook")]),t.time?n("span",{staticClass:"date"},[t._v(t._s(t._f("fDate")(t.time)))]):n("span",{staticClass:"date"},[t._v("July 11, 2019")])])},rs=[],is={props:["time"]},as=is,os=(n("7ed1"),Object(d["a"])(as,ss,rs,!1,null,"4d6777a9",null)),cs=os.exports,us={components:{AppPost:mn,FriendSuggest:qn,UserDetails:zn,UserFriends:ns,JoinedFacebook:cs},data:function(){return{user:null}},methods:{loadUser:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$route.params.userId){t.next=6;break}return t.next=3,Ts.getById(this.$route.params.userId);case 3:e=t.sent,this.user=e,window.scrollTo(0,0);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadUser()},watch:{"$route.params.userId":function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.loadUser();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},ls=us,ps=(n("9bf1"),Object(d["a"])(ls,mt,ht,!1,null,"df0c5314",null)),ds=ps.exports,fs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"home-page"},[n("aside",{staticClass:"left"}),n("main",[n("router-view",{staticClass:"router"}),n("friend-suggest",{staticClass:"friend-suggest"})],1),n("aside")])},ms=[],hs={components:{AppPost:mn,FriendSuggest:qn}},gs=hs,vs=(n("3ba9"),Object(d["a"])(gs,fs,ms,!1,null,"1f86340e",null)),bs=vs.exports,_s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("app-post",{staticClass:"app-post"})],1)},ws=[],ys={components:{AppPost:mn}},js=ys,Cs=(n("755c"),Object(d["a"])(js,_s,ws,!1,null,"791b3305",null)),ks=Cs.exports,xs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.post?s("div",{staticClass:"post-preview floating-box"},[s("main",[s("header",[s("div",{staticClass:"profile-image-container-thumb"},[s("img",{attrs:{src:t.user.url.profileImg,alt:""}})]),s("div",{staticClass:"info-container",staticStyle:{"padding-top":"3px"}},[s("div",{staticStyle:{"margin-bottom":"5px"}},[s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.toUserProfile(e)}}},[t._v(t._s(t.user.username))]),t.post.userId!==t.post.user2Id?s("span",[t._v("\n             ▸ \n            "),s("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.push("/user/"+t.post.user2Id)}}},[t._v(t._s(t._f("fUsername")(t.post.user2.username)))])]):t._e()]),s("div",{staticClass:"time-container"},[s("span",{staticClass:"time",on:{click:function(e){return t.$router.push("/post/"+t.post._id)}}},[t._v("40 min ago")]),t._v("\n          ·\n          "),s("i",{staticClass:"fas fa-globe-americas"})])])]),"gradient"!==t.post.type?s("div",{staticStyle:{"font-size":"15px","margin-bottom":"12px"},domProps:{innerHTML:t._s(t.post.txt)}}):t._e()]),s("content-preview",{attrs:{type:t.post.type,content:t.post.content,post:t.post}}),s("footer",[s("div",{staticClass:"stats-container"},[s("p",{staticClass:"like-count"},[t.post.likedBy.length?s("span",[s("img",{attrs:{src:n("8e44"),alt:""}}),t._v(" "+t._s(t.post.likedBy.length))]):t._e()]),s("p",{staticClass:"comment-count",on:{click:t.toggleComments}},[t.post.comments.length?s("span",[t._v(t._s(t.post.comments.length)+" Comments")]):t._e()])]),s("interactions-btns",{attrs:{isLiked:t.isLiked},on:{toggleLike:t.toggleLike,toggleComments:t.toggleComments}})],1),t.showComments?s("post-comments",{attrs:{comments:t.post.comments},on:{addComment:t.addComment}}):t._e()],1):t._e()},Is=[],$s={components:{InteractionsBtns:je,PostComments:en,ContentPreview:Vt},data:function(){return{showComments:!0,post:null}},computed:{user:function(){return this.post.user},isLiked:function(){var t=this;return!!this.$store.getters.loggedInUser&&this.post.likedBy.find(function(e){return e.userId===t.$store.getters.loggedInUser._id})}},methods:{toggleComments:function(){this.showComments=!this.showComments},toggleLike:function(){var t=this,e=this.post.likedBy.findIndex(function(e){return e.userId===t.$store.getters.loggedInUser._id});-1===e?this.post.likedBy.unshift({userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username}):this.post.likedBy.splice(e,1),this.$store.dispatch({type:"toggleLike",userId:this.$store.getters.loggedInUser._id,postId:this.post._id})},addComment:function(t){var e={at:Date.now(),_id:Math.random()+"",postId:this.post._id,txt:t,owner:{userId:this.$store.getters.loggedInUser._id,username:this.$store.getters.loggedInUser.username,profileImg:this.$store.getters.loggedInUser.url.profileImg},likedBy:[]};this.post.comments.push(e),this.$store.dispatch({type:"saveComment",comment:e})},toUserProfile:function(){this.$router.push("/user/".concat(this.post.user._id))},loadPost:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.postId,t.next=3,wt.getById(e);case 3:n=t.sent,this.post=n;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.loadPost()},watch:{"$route.params.postId":function(){this.loadPost()}}},Os=$s,Us=(n("502b"),Object(d["a"])(Os,xs,Is,!1,null,"326161a8",null)),Rs=Us.exports;s["a"].use(ft["a"]);var Ps=new ft["a"]({routes:[{path:"/",name:"HomePage",component:bs,children:[{path:"",component:ks},{path:"post/:postId",component:Rs}]},{path:"/user/:userId",name:"UserProfile",component:ds},{path:"/post/:postId",name:"NewsFeed",component:ks}]}),Ss=n("bc3a"),Ls=n.n(Ss),Es="/",Bs=Ls.a.create({withCredentials:!0});function Fs(t){return As.apply(this,arguments)}function As(){return As=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s,r,i,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"get",s=a.length>2&&void 0!==a[2]?a[2]:null,r=a.length>3&&void 0!==a[3]?a[3]:null,t.prev=3,t.next=6,Bs({url:"".concat(Es).concat(e),method:n,data:s,params:r});case 6:return i=t.sent,t.abrupt("return",i.data);case 10:throw t.prev=10,t.t0=t["catch"](3),401===t.t0.response.status&&Ps.push("/"),t.t0;case 14:case"end":return t.stop()}},t,null,[[3,10]])})),As.apply(this,arguments)}var qs={get:function(t,e){return Fs(t,"GET",null,e)},post:function(t,e){return Fs(t,"POST",e)},put:function(t,e){return Fs(t,"PUT",e)},delete:function(t,e){return Fs(t,"DELETE",e)}},Ts={login:Ms,logout:Js,signup:Gs,getLoggedInUser:Ns,getUsers:Ys,getById:Qs,update:tr,query:Vs},Ws="loggedInUser11",Ds="undefined"===sessionStorage.getItem(Ws)?null:JSON.parse(sessionStorage.getItem(Ws));function Ns(){return Ds}function Ms(t){return zs.apply(this,arguments)}function zs(){return zs=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qs.post("api/auth/login",e);case 3:return n=t.sent,Ds=n,sessionStorage.setItem(Ws,JSON.stringify(Ds)),t.abrupt("return",Ds);case 9:t.prev=9,t.t0=t["catch"](0),console.log("err");case 12:case"end":return t.stop()}},t,null,[[0,9]])})),zs.apply(this,arguments)}function Gs(t){return Hs.apply(this,arguments)}function Hs(){return Hs=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qs.post("api/auth/signup",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),Hs.apply(this,arguments)}function Js(){Ds=null,sessionStorage.setItem(Ws,null),qs.post("api/auth/logout").then(function(t){console.log(t)})}function Vs(t){return Ks.apply(this,arguments)}function Ks(){return Ks=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/user",e));case 1:case"end":return t.stop()}},t)})),Ks.apply(this,arguments)}function Ys(){return Zs.apply(this,arguments)}function Zs(){return Zs=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/user"));case 1:case"end":return t.stop()}},t)})),Zs.apply(this,arguments)}function Qs(t){return Xs.apply(this,arguments)}function Xs(){return Xs=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/user/".concat(e)));case 1:case"end":return t.stop()}},t)})),Xs.apply(this,arguments)}function tr(t){return er.apply(this,arguments)}function er(){return er=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qs.put("api/user/",e);case 2:return n=t.sent,Ds=n,sessionStorage.setItem(Ws,JSON.stringify(Ds)),t.abrupt("return",Ds);case 6:case"end":return t.stop()}},t)})),er.apply(this,arguments)}var nr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-preview",on:{click:function(e){return t.$router.push("/user/"+t.user._id)}}},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}}),n("a",{staticClass:"username"},[t._v(t._s(t.user.username))])]),n("div")])},sr=[],rr={props:["user"],methods:{}},ir=rr,ar=(n("d188"),Object(d["a"])(ir,nr,sr,!1,null,"1cc1d60a",null)),or=ar.exports,cr={components:{UserPreview:or,MyLoader:ce},data:function(){return{filterBy:{txt:"",limit:5},users:[],isLoading:!1}},methods:{onInput:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,Ts.query(this.filterBy);case 3:e=t.sent,this.users=e,Object(M["setTimeout"])(function(){n.isLoading=!1},700);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clearInput:function(){this.filterBy.txt=""}}},ur=cr,lr=(n("6157"),Object(d["a"])(ur,lt,pt,!1,null,"790daf02",null)),pr=lr.exports,dr={components:{AppRegister:m,AppUpdates:ut,AppSearch:pr},computed:{loggedInUser:function(){return console.log(this.$store.getters.loggedInUser),this.$store.getters.loggedInUser}}},fr=dr,mr=(n("a8b9"),Object(d["a"])(fr,a,o,!1,null,"cd103aa2",null)),hr=mr.exports,gr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"app-chat"},[n("contact-cmp",{staticClass:"contact-cmp"}),t._l(t.chats,function(t,e){return n("chat-window",{key:t._id,attrs:{chat:t,idx:e}})})],2)},vr=[],br=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-cmp"},[n("div",{staticClass:"top",on:{click:t.toggleList}},[n("div",{staticClass:"main"},[n("span",[t._v("Chat ("+t._s(t.users.length)+")")]),n("i",{staticClass:"far fa-edit",staticStyle:{"font-size":"16px"}})])]),t.isShowList?n("contact-list",{attrs:{users:t.users}}):t._e()],1)},_r=[],wr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"friendship-list"},t._l(t.users,function(t){return n("contact-preview",{key:t._id,attrs:{user:t}})}),1)},yr=[],jr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-preview",class:t.classObj,on:{click:t.loadChatWith}},[n("div",{staticClass:"profile-image-container-thumb"},[n("img",{attrs:{src:t.user.url.profileImg,alt:""}}),t._v("\n    "+t._s(t.user.username)+"\n  ")]),n("div",[n("span",{staticClass:"dot",class:t.classObj})])])},Cr=[],kr=(n("3e8f"),{props:["user"],computed:{classObj:function(){var t=this;return{active:this.$store.getters.activeUsers.find(function(e){return e===t.user._id})}}},methods:{loadChatWith:function(){this.$store.dispatch({type:"loadChatWith",userId:this.user._id})}}}),xr=kr,Ir=(n("807f"),Object(d["a"])(xr,jr,Cr,!1,null,"2b658e08",null)),$r=Ir.exports,Or={props:["users"],components:{ContactPreview:$r}},Ur=Or,Rr=(n("e5c3"),Object(d["a"])(Ur,wr,yr,!1,null,"66f799d2",null)),Pr=Rr.exports,Sr={components:{ContactList:Pr},data:function(){return{isShowList:!1}},computed:{users:function(){return this.$store.getters.approvedUsers}},methods:{toggleList:function(){this.isShowList=!this.isShowList}}},Lr=Sr,Er=(n("c178"),Object(d["a"])(Lr,br,_r,!1,null,"42bf0888",null)),Br=Er.exports,Fr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.chats,function(t,e){return n("chat-window",{key:t._id,attrs:{chat:t,idx:e}})}),1)},Ar=[],qr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-window"},[n("audio",{attrs:{id:"play",src:"https://vocaroo.com/media_command.php?media=s1dwvulZpRw1&command=download_mp3"}}),n("div",{staticClass:"top",on:{click:t.toggleWindow}},[n("div",{staticClass:"main"},[n("div",{staticClass:"user-info-container"},[n("img",{attrs:{src:t.chat.user.url.profileImg,alt:""}}),t.isActive?n("span",{staticClass:"dot active"}):t._e(),t._v("\n        "+t._s(t.chat.user.username)+"\n      ")]),n("i",{staticClass:"fas fa-times system-color"})])]),t.isWindow?n("div",{staticClass:"content"},[n("div",{ref:"msgList",staticClass:"msg-list"},t._l(t.msgs,function(t){return n("msg-preview",{key:t.at,attrs:{msg:t}})}),1),n("form",{staticClass:"send-msg-container",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.txt,expression:"txt"}],ref:"txtInput",attrs:{type:"text",placeholder:"Type a message...",autofocus:""},domProps:{value:t.txt},on:{input:function(e){e.target.composing||(t.txt=e.target.value)}}}),n("i",{staticClass:"fas fa-arrow-circle-up send-icon",class:t.classObj})])]):t._e()])},Tr=[],Wr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"msg-preview income",class:t.classObj},[t._v(t._s(t.msg.txt))])])},Dr=[],Nr={props:["msg"],computed:{classObj:function(){return{outcome:this.msg.userId===this.$store.getters.loggedInUser._id}}}},Mr=Nr,zr=(n("5c67"),Object(d["a"])(Mr,Wr,Dr,!1,null,"2b6cc06d",null)),Gr=zr.exports,Hr={props:["chat"],data:function(){return{txt:"",isWindow:!0}},computed:{msgs:function(){return this.chat.msgs},classObj:function(){return{disable:!this.txt}},isActive:function(){var t=this;return this.$store.getters.activeUsers.find(function(e){return e===t.chat.user._id})}},methods:{sendMsg:function(){if(this.txt){var t=this.createMsg();this.$store.dispatch({type:"addMsg",msg:t,chatId:this.chat._id,toUserId:this.chat.user1Id===this.$store.getters.loggedInUser._id?this.chat.user2Id:this.chat.user1Id}),this.txt="",this.$refs.txtInput.focus()}},createMsg:function(){return{txt:this.txt,userId:this.$store.getters.loggedInUser._id,at:Date.now()}},toggleWindow:function(){this.isWindow=!this.isWindow,this.isWindow&&this.scrollToTop()},scrollToTop:function(){var t=this;setTimeout(function(){t.$refs.msgList.scrollTop=t.$refs.msgList.scrollHeight},100)}},mounted:function(){this.scrollToTop()},watch:{msgs:function(){console.log(this.msgs[this.msgs.length-1].userId),this.msgs[this.msgs.length-1].userId!==this.$store.getters.loggedInUser._id&&document.getElementById("play").play(),this.scrollToTop()}},components:{MsgPreview:Gr}},Jr=Hr,Vr=(n("29be"),Object(d["a"])(Jr,qr,Tr,!1,null,"1d629d12",null)),Kr=Vr.exports,Yr={components:{ChatWindow:Kr},computed:{chats:function(){return console.log(this.$store.getters.chatsForDesktop),this.$store.getters.chatsForDesktop}}},Zr=Yr,Qr=Object(d["a"])(Zr,Fr,Ar,!1,null,"63afc116",null),Xr=(Qr.exports,{components:{ContactCmp:Br,ChatWindow:Kr},computed:{chats:function(){return console.log(this.$store.getters.chatsForDesktop),this.$store.getters.chatsForDesktop}}}),ti=Xr,ei=(n("6a08"),Object(d["a"])(ti,gr,vr,!1,null,"ee1773e6",null)),ni=ei.exports,si=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("img",{attrs:{src:t.imgSrc,alt:""},on:{click:t.toggleTheme}})},ri=[],ii={data:function(){return{isDark:!1}},methods:{toggleTheme:function(){document.querySelector("body").classList.toggle("dark"),this.isDark=!this.isDark}},computed:{imgSrc:function(){return this.isDark?"https://svgshare.com/i/EF4.svg":"https://svgshare.com/i/EH9.svg"}}},ai=ii,oi=(n("9f60"),Object(d["a"])(ai,si,ri,!1,null,"332d75b0",null)),ci=oi.exports,ui=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"pseudo"},[n("div",{staticClass:"mobile-bar"},[n("div",{staticClass:"main"},[n("i",{staticClass:"fas fa-home",on:{click:function(e){return t.$router.push("/")}}}),n("i",{staticClass:"fas fa-user",on:{click:function(e){return t.$router.push("/user/"+t.$store.getters.loggedInUser._id)}}}),n("app-notification"),n("friendship-request"),n("app-inbox")],1)])])},li=[],pi={components:{AppNotification:J,FriendshipRequest:it,AppInbox:j}},di=pi,fi=(n("b677"),Object(d["a"])(di,ui,li,!1,null,"4b76f36b",null)),mi=fi.exports,hi=n("8055"),gi=n.n(hi),vi="",bi=gi()(vi),_i={on:wi,emit:yi};function wi(t,e){bi.on(t,e)}function yi(t,e){bi.emit(t,e)}var ji={components:{AppHeader:hr,AppChat:ni,AppTheme:ci,MobileBar:mi},mounted:function(){this.$store.getters.loggedInUser&&(this.$store.dispatch({type:"listenSocketEvents"}),_i.emit("user active",this.$store.getters.loggedInUser._id))}},Ci=ji,ki=(n("034f"),Object(d["a"])(Ci,r,i,!1,null,null,null)),xi=ki.exports,Ii=n("2f62"),$i={state:{loggedInUser:Ts.getLoggedInUser(),activeUsers:[]},getters:{loggedInUser:function(t){return t.loggedInUser},activeUsers:function(t){return t.activeUsers}},mutations:{setUser:function(t,e){var n=e.user;t.loggedInUser=n},setActiveUsers:function(t,e){var n=e.activeUsers;t.activeUsers=n}},actions:{login:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.credentials,t.next=3,Ts.login(s);case 3:location.reload();case 4:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),signup:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.credentials,t.prev=1,t.next=4,Ts.signup(s);case 4:e.dispatch({type:"login",credentials:s}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log("ERROR: cant login");case 10:case"end":return t.stop()}},t,null,[[1,7]])}));function e(e,n){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,_i.emit("user inActive",e.getters.loggedInUser._id),t.next=4,Ts.logout();case 4:location.reload(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));function e(e){return t.apply(this,arguments)}return e}(),saveUser:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.user,console.log(s,"UESER"),t.prev=2,t.next=5,Ts.update(s);case 5:r=t.sent,e.commit({type:"setUser",user:r}),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](2),t.t0;case 12:case"end":return t.stop()}},t,null,[[2,9]])}));function e(e,n){return t.apply(this,arguments)}return e}(),listenSocketEvents:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:_i.on("activeUsers changed",function(t){e.commit({type:"setActiveUsers",activeUsers:t})});case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},Oi={state:{posts:[]},getters:{posts:function(t){return t.posts}},mutations:{setPosts:function(t,e){var n=e.posts;t.posts=n},save:function(t,e){var n=e.post;t.posts.unshift(n)},toggleLike:function(t,e){var n=e.postId,s=e.loggedInUser,r=s._id,i=s.username,a=t.posts.find(function(t){return t._id===n});if(a){var o=a.likedBy.findIndex(function(t){return t.userId===r});-1===o?a.likedBy.unshift({userId:r,username:i}):a.likedBy.splice(o,1)}},saveComment:function(t,e){var n=e.comment,s=t.posts.find(function(t){return t._id===n.postId});if(s){var r=s.comments.findIndex(function(t){return t._id===n._id});r>=0?s.comments.splice(r,1,n):s.comments.push(n)}}},actions:{loadPosts:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.filterBy,r=void 0===s?{}:s,r.user2Id=Ps.app._route.params.userId,console.log("filterBy",r),t.next=5,wt.query(r);case 5:i=t.sent,e.commit({type:"setPosts",posts:i});case 7:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),addPost:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.post,t.next=3,wt.save(s);case 3:t.sent,e.dispatch({type:"loadPosts"});case 5:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),toggleLike:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,r=e.getters,n.userId,i=n.postId,a=r.loggedInUser,s("toggleLike",{postId:i,loggedInUser:a}),t.next=6,wt.toggleLike({postId:i,loggedInUser:a});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),saveComment:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.comment,t.next=3,wt.saveComment(s);case 3:r=t.sent,console.log(r),e.commit({type:"saveComment",comment:r});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}()}},Ui={query:Ei,add:Ri,save:Si};function Ri(t){return Pi.apply(this,arguments)}function Pi(){return Pi=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.post("api/friendship",e));case 1:case"end":return t.stop()}},t)})),Pi.apply(this,arguments)}function Si(t){return Li.apply(this,arguments)}function Li(){return Li=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.post("api/friendship",e));case 1:case"end":return t.stop()}},t)})),Li.apply(this,arguments)}function Ei(t){return Bi.apply(this,arguments)}function Bi(){return Bi=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/friendship/",e));case 1:case"end":return t.stop()}},t)})),Bi.apply(this,arguments)}var Fi={state:{suggests:[],friendshipUsers:[]},getters:{suggests:function(t,e){return t.suggests.filter(function(t){return!t.friendship&&t._id!==e.loggedInUser._id})},requestingUsers:function(t){return t.friendshipUsers.filter(function(t){return console.log(t.friendship.isApproved,t.friendship.user1Id===t._id),!t.friendship.isApproved&&t.friendship.user1Id===t._id})},approvedUsers:function(t){return t.friendshipUsers.filter(function(t){return t.friendship.isApproved})}},mutations:{setSuggests:function(t,e){var n=e.suggests;t.suggests=n},setFriendshipUsers:function(t,e){var n=e.friendshipUsers;t.friendshipUsers=n},saveUserFriendship:function(t,e){e.user}},actions:{saveFriendship:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.friendship,console.log("user store",s),t.next=4,Ui.save(s);case 4:r=t.sent,console.log("savedFriendship",r);case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),loadFriendshipUsers:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={isFriendship:!0},t.next=3,Ts.query(n);case 3:s=t.sent,e.commit({type:"setFriendshipUsers",friendshipUsers:s});case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),loadSuggests:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n.fiterBy,t.next=3,Ts.query();case 3:s=t.sent,console.log("suggests",s),e.commit({type:"setSuggests",suggests:s});case 6:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),listenSocketEvents:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:_i.on("new friendship",function(){console.log("new friendship"),e.dispatch({type:"loadFriendshipUsers"})});case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},Ai={query:qi,setAllSeen:Wi,update:Ni};function qi(){return Ti.apply(this,arguments)}function Ti(){return Ti=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/notification"));case 1:case"end":return t.stop()}},t)})),Ti.apply(this,arguments)}function Wi(){return Di.apply(this,arguments)}function Di(){return Di=Object(dt["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)})),Di.apply(this,arguments)}function Ni(t){return Mi.apply(this,arguments)}function Mi(){return Mi=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.put("api/notification",e));case 1:case"end":return t.stop()}},t)})),Mi.apply(this,arguments)}var zi={state:{notifications:[]},getters:{notifications:function(t){return t.notifications},unSeenNotifications:function(t){return t.notifications.filter(function(t){return!t.isSeen})}},mutations:{setNotifications:function(t,e){var n=e.notifications;t.notifications=n},updateNotification:function(t,e){var n=e.notification,s=t.notifications.findIndex(function(t){return t._id===n._id});t.notifications.splice(s,1,n)}},actions:{loadNotifications:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ai.query();case 2:n=t.sent,e.commit({type:"setNotifications",notifications:n});case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),setAllSeen:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),updateNotification:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.notification,e.commit({type:"updateNotification",notification:s}),t.next=4,Ai.update(s);case 4:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),listenSocketEvents:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:_i.on("new notification",function(t){e.dispatch({type:"loadNotifications"})});case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},Gi={loadChatWith:Hi};function Hi(t){return Ji.apply(this,arguments)}function Ji(){return Ji=Object(dt["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",qs.get("api/chat",e));case 1:case"end":return t.stop()}},t)})),Ji.apply(this,arguments)}var Vi={state:{chats:[]},getters:{chats:function(t){return t.chats},chatsForDesktop:function(t){return t.chats.slice(0,2)}},mutations:{addMsg:function(t,e){var n=e.msg,s=e.chatId,r=t.chats.find(function(t){return t._id===s});r.msgs.push(n)},unshiftChat:function(t,e){var n=e.chat,s=t.chats.findIndex(function(t){return t._id===n._id});s>=0&&t.chats.splice(s,1),t.chats.unshift(n)}},actions:{loadChatWith:function(){var t=Object(dt["a"])(regeneratorRuntime.mark(function t(e,n){var s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=n.userId,t.next=3,Gi.loadChatWith({userId:s});case 3:r=t.sent,e.commit({type:"unshiftChat",chat:r});case 5:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),addMsg:function(t,e){var n=e.msg,s=e.chatId,r=e.toUserId;t.commit({type:"addMsg",msg:n,chatId:s}),_i.emit("add msg",{msg:n,chatId:s,toUserId:r})},listenSocketEvents:function(t){function e(e){return t.getters.chatsForDesktop.find(function(t){return t._id===e})}_i.on("new msg",function(){var n=Object(dt["a"])(regeneratorRuntime.mark(function n(s,r){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!e(r)){n.next=4;break}t.commit({type:"addMsg",msg:s,chatId:r}),n.next=6;break;case 4:return n.next=6,t.dispatch({type:"loadChatWith",userId:s.userId});case 6:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}())}}},Ki={state:{},getters:{},mutations:{},actions:{}};s["a"].use(Ii["a"]);var Yi=new Ii["a"].Store({state:{},mutations:{},actions:{},modules:{UserStore:$i,PostStore:Oi,FriendshipStore:Fi,NotificationStore:zi,ChatStore:Vi,SocketStore:Ki}}),Zi=Yi,Qi=(n("28a5"),n("c1df")),Xi=n.n(Qi);s["a"].filter("formatNum",function(t){return t.toLocaleString()}),s["a"].filter("timeAgo",function(t){return Xi()(t).fromNow()}),s["a"].filter("fDate",function(t){return Xi()(t).format("LL")}),s["a"].filter("fUsername",function(t){t=t.toLowerCase();var e=t.split(" ");return e.map(function(t){return t[0].toUpperCase()+t.slice(1,t.length)}).join(" ")});var ta=n("9483");Object(ta["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),s["a"].config.productionTip=!1,new s["a"]({router:Ps,store:Zi,render:function(t){return t(xi)}}).$mount("#app")},"57e5":function(t,e,n){},"5c67":function(t,e,n){"use strict";var s=n("57e5"),r=n.n(s);r.a},"5ef5":function(t,e,n){},"5f96":function(t,e,n){"use strict";var s=n("9be0"),r=n.n(s);r.a},6157:function(t,e,n){"use strict";var s=n("7e42"),r=n.n(s);r.a},"624c":function(t,e,n){},"64a9":function(t,e,n){},"6a08":function(t,e,n){"use strict";var s=n("624c"),r=n.n(s);r.a},"6b41":function(t,e,n){"use strict";var s=n("963e"),r=n.n(s);r.a},"6f8c":function(t,e,n){},"755c":function(t,e,n){"use strict";var s=n("7a6c"),r=n.n(s);r.a},"75fc":function(t,e,n){},7997:function(t,e,n){},"7a6c":function(t,e,n){},"7c76":function(t,e,n){},"7e42":function(t,e,n){},"7ed1":function(t,e,n){"use strict";var s=n("7f37"),r=n.n(s);r.a},"7f37":function(t,e,n){},"807f":function(t,e,n){"use strict";var s=n("da64"),r=n.n(s);r.a},"80aa":function(t,e,n){},8674:function(t,e,n){"use strict";var s=n("95f2"),r=n.n(s);r.a},"87aa":function(t,e,n){"use strict";var s=n("13ed"),r=n.n(s);r.a},"8dc8":function(t,e,n){"use strict";var s=n("4433"),r=n.n(s);r.a},"8dfb":function(t,e,n){"use strict";var s=n("7997"),r=n.n(s);r.a},"8e44":function(t,e,n){t.exports=n.p+"img/like.7abf9b4e.png"},"8faf":function(t,e,n){"use strict";var s=n("bab9"),r=n.n(s);r.a},9239:function(t,e,n){},"943b":function(t,e,n){},"95f2":function(t,e,n){},"963e":function(t,e,n){},"96f0":function(t,e,n){"use strict";var s=n("ec2a"),r=n.n(s);r.a},"9be0":function(t,e,n){},"9bf1":function(t,e,n){"use strict";var s=n("f413"),r=n.n(s);r.a},"9d81":function(t,e,n){},"9f2e":function(t,e,n){},"9f55":function(t,e,n){},"9f60":function(t,e,n){"use strict";var s=n("80aa"),r=n.n(s);r.a},a2ae:function(t,e,n){"use strict";var s=n("9f55"),r=n.n(s);r.a},a427:function(t,e,n){"use strict";var s=n("7c76"),r=n.n(s);r.a},a4b7:function(t,e,n){"use strict";var s=n("9239"),r=n.n(s);r.a},a8b9:function(t,e,n){"use strict";var s=n("48d5"),r=n.n(s);r.a},ad52:function(t,e,n){},ae24:function(t,e,n){},b209:function(t,e,n){"use strict";var s=n("d3cf"),r=n.n(s);r.a},b440:function(t,e,n){"use strict";var s=n("f7c2"),r=n.n(s);r.a},b677:function(t,e,n){"use strict";var s=n("5070"),r=n.n(s);r.a},bab9:function(t,e,n){},bee0:function(t,e,n){},bfc3:function(t,e,n){"use strict";var s=n("d321"),r=n.n(s);r.a},c178:function(t,e,n){"use strict";var s=n("170f"),r=n.n(s);r.a},cedb:function(t,e,n){"use strict";var s=n("fc48"),r=n.n(s);r.a},d188:function(t,e,n){"use strict";var s=n("2616"),r=n.n(s);r.a},d321:function(t,e,n){},d3cf:function(t,e,n){},d6e0:function(t,e,n){},da64:function(t,e,n){},dc14:function(t,e,n){"use strict";var s=n("5ef5"),r=n.n(s);r.a},e429:function(t,e,n){t.exports=n.p+"img/image.b651739e.png"},e5c3:function(t,e,n){"use strict";var s=n("ae24"),r=n.n(s);r.a},e91b:function(t,e,n){"use strict";var s=n("ad52"),r=n.n(s);r.a},ec2a:function(t,e,n){},f28f:function(t,e,n){},f413:function(t,e,n){},f7c2:function(t,e,n){},fc48:function(t,e,n){},fcbb:function(t,e,n){"use strict";var s=n("3a6a"),r=n.n(s);r.a}});
//# sourceMappingURL=app.d87c95be.js.map